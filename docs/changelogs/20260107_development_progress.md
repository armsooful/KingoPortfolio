# KingoPortfolio κ°λ° μ§„ν–‰μƒν™© (2026-01-07)

## π“‹ μ‘μ—… μ”μ•½

### 1. μ΄μ „ μ„Έμ…μ—μ„ μ™„λ£λ μ‘μ—…
- β… PDF λ¦¬ν¬νΈ μƒμ„± κΈ°λ¥ κµ¬ν„
- β… λ©΄μ±… λ¬Έκµ¬ μ‹μ¤ν… κµ¬ν„
- β… μ‹μ¥ ν„ν™© λ°μ΄ν„° μµμ‹ ν™” (yfinance β†’ 2μΌμΉ λ°μ΄ν„°λ΅ μ •ν™•ν• μΌμΌ λ³€λ™λ¥  κ³„μ‚°)
- β… κ°λ³„ μΆ…λ© μ‹¤μ‹κ°„ κ°€κ²© λ°μ΄ν„° κ°μ„  (pykrx λΌμ΄λΈλ¬λ¦¬ ν™μ©)
- β… ν¬νΈν΄λ¦¬μ¤ μ‹λ®¬λ μ΄μ… μ•κ³ λ¦¬μ¦ λ€ν­ κ°μ„  (7λ‹¨κ³„ μƒν”λ§ ν”„λ΅μ„Έμ¤)

### 2. κΈμΌ μ„Έμ… μ‘μ—… λ‚΄μ©

#### 2.1 μ„λ²„ μ¬κΈ°λ™ λ° ν…μ¤νΈ ν™κ²½ κµ¬μ¶•
- **λ¬Έμ **: λ°±μ—”λ“/ν”„λ΅ νΈμ—”λ“ μ„λ²„ μ‹μ‘ μ‹¤ν¨
- **μ›μΈ**:
  - ν”„λ΅ νΈμ—”λ“: Vite ν”„λ΅μ νΈμΈλ° `npm start` λ…λ Ήμ–΄ μ‚¬μ© μ‹λ„
  - λ°±μ—”λ“: venv κ²½λ΅ λ¬Έμ 
- **ν•΄κ²°**:
  - λ°±μ—”λ“: `http://localhost:8000` (uvicorn with reload)
  - ν”„λ΅ νΈμ—”λ“: `http://localhost:5173` (Vite dev server)

#### 2.2 ν¬νΈν΄λ¦¬μ¤ μƒμ„± μ¤λ¥ μμ •
- **λ¬Έμ **: `'int' object is not subscriptable` μ—λ¬ λ°μƒ
- **μ›μΈ**: `_calculate_allocation` λ©”μ„λ“κ°€ strategy λ”•μ…”λ„λ¦¬μ λ¨λ“  ν•­λ©μ„ μνν•λ©΄μ„ `num_stocks`, `preferred_sectors` κ°™μ€ μ •μ/λ¦¬μ¤νΈ κ°’μ— subscript μ ‘κ·Ό μ‹λ„
- **ν•΄κ²°**: μμ‚° ν΄λμ¤(`stocks`, `etfs`, `bonds`, `deposits`)λ§ ν•„ν„°λ§ν•μ—¬ μ²λ¦¬
- **νμΌ**: `/backend/app/services/portfolio_engine.py` (λΌμΈ 140-160)

```python
# μμ • μ „
for asset_class, weights in strategy.items():
    target_ratio = weights["target"] / 100  # num_stocks=7μΌ λ• μ—λ¬!

# μμ • ν›„
asset_classes = ["stocks", "etfs", "bonds", "deposits"]
for asset_class in asset_classes:
    if asset_class in strategy:
        weights = strategy[asset_class]
        target_ratio = weights["target"] / 100
```

#### 2.3 UI λ””μμΈ μΌκ΄€μ„± κ°μ„ 
- **λ¬Έμ **: Disclaimer μ»΄ν¬λ„νΈκ°€ Tailwind CSS μ‚¬μ©μΌλ΅ μ „μ²΄ ν™”λ©΄ λ””μμΈκ³Ό λ¶€μ΅°ν™”
- **ν•΄κ²°**: μΈλΌμΈ μ¤νƒ€μΌλ΅ λ³€κ²½ν•μ—¬ ν¬νΈν΄λ¦¬μ¤ νμ΄μ§€μ λ³΄λΌμƒ‰ κ·ΈλΌλ°μ΄μ… λ°°κ²½κ³Ό μ΅°ν™”
- **νμΌ**: `/frontend/src/components/Disclaimer.jsx`
- **λ””μμΈ μ”μ†**:
  - λ°ν¬λ… μ¤λ μ§€ λ°°κ²½: `rgba(255, 243, 224, 0.95)`
  - μ™Όμ½ ν…λ‘λ¦¬: `4px solid #ff9800`
  - λ‘¥κ·Ό λ¨μ„λ¦¬: `16px`
  - κ·Έλ¦Όμ: `0 4px 15px rgba(0, 0, 0, 0.1)`

#### 2.4 Git μ»¤λ°‹ λ° ν‘Έμ‹
- **μ»¤λ°‹ ν•΄μ‹**: `f2af023`
- **μ»¤λ°‹ λ©”μ‹μ§€**: "fix: Fix portfolio generation error and improve UI consistency"
- **λ³€κ²½ νμΌ**:
  - `backend/app/services/portfolio_engine.py`
  - `frontend/src/components/Disclaimer.jsx`

---

## π― κ°μ„ λ ν¬νΈν΄λ¦¬μ¤ μ‹λ®¬λ μ΄μ… μ•κ³ λ¦¬μ¦ (ν„μ¬ μƒνƒ)

β οΈ **κµμ΅ λ©μ **: λ³Έ μ•κ³ λ¦¬μ¦μ€ ν¬μ μ „λµ ν•™μµμ© μ‹λ®¬λ μ΄μ… λ„κµ¬μ…λ‹λ‹¤.

### μμ‚° λ°°λ¶„ μ „λµ

| ν¬μ μ„±ν–¥ | μ£Όμ‹ λΉ„μ¤‘ | μΆ…λ© μ | λ°°λ‹Ήμμµλ¥  μµμ† | μ„ νΈ μ„Ήν„° |
|---------|---------|--------|--------------|----------|
| **λ³΄μν•** | 40% | 7κ° | 2.0% | κΈμµ, ν•„μμ†λΉ„μ¬, ν—¬μ¤μΌ€μ–΄, μ‚°μ—…μ¬ |
| **μ¤‘λ¦½ν•** | 60% | 10κ° | 1.5% | IT, κΈμµ, μ‚°μ—…μ¬, ν—¬μ¤μΌ€μ–΄, μ†λΉ„μ¬ |
| **κ³µκ²©ν•** | 80% | 12κ° | 0% | IT, λ°”μ΄μ¤, 2μ°¨μ „μ§€, λ°λ„μ²΄ |

### 7λ‹¨κ³„ μΆ…λ© μƒν”λ§ ν”„λ΅μ„Έμ¤

1. **κΈ°λ³Έ ν•„ν„°λ§**: ν™μ„± μΆ…λ©, μ ν¨ν• κ°€κ²©
2. **μ„Ήν„° ν•„ν„°λ§**: μ „λµ μ ν•λ³„ μ„ νΈ μ„Ήν„°
3. **κ°μ„ λ μ¤μ½”μ–΄λ§**:
   - λ¨λ©ν…€ μ μ (30μ )
   - κ°€μΉ μ μ - PER/PBR (30μ )
   - λ°°λ‹Ή μ μ (20μ )
   - μ„±μ¥μ„± μ μ (20μ )
4. **Top N μƒν”λ§**: μ μ κΈ°μ¤€ μƒμ„ μƒν” μ¶”μ¶
5. **μ„Ήν„° λ‹¤κ°ν™”**: ν• μ„Ήν„°λ‹Ή μµλ€ 40% μ ν•
6. **μ μ κΈ°λ° λΉ„μ¤‘ κ³„μ‚°**: μΆ…λ©λ‹Ή 5-30% μ ν•
7. **κΈμ•΅ λ°°λ¶„ λ° μ£Όμ‹ μ κ³„μ‚°**

### ν¬νΈν΄λ¦¬μ¤ λ¶„μ„ κΈ°λ¥
- κΈ°λ€ μ—°κ°„ μμµλ¥ 
- λ¦¬μ¤ν¬ λ λ²¨
- μ„Ήν„°λ³„ λΉ„μ¤‘ λ¶„μ„
- μΆ…λ©λ³„ ν¬μ κ·Όκ±°

---

## π€ λ‹¤μ μν–‰ λ‹¨κ³„

### λ‹¨κΈ° λ©ν‘ (μ¦‰μ‹ ~ 1μ£ΌμΌ)

#### 1. λ°μ΄ν„° ν’μ§ κ°μ„ 
- [ ] **Stock λ°μ΄ν„°λ² μ΄μ¤ λ³΄κ°•**
  - ν„μ¬ DBμ— μ‹¤μ  μ£Όμ‹ λ°μ΄ν„°κ°€ μ¶©λ¶„ν μλ”μ§€ ν™•μΈ
  - pykrxλ¥Ό ν™μ©ν• λ°°μΉ μ‘μ—…μΌλ΅ μ£Όμ” μΆ…λ© λ°μ΄ν„° μμ§‘
  - μ¬λ¬΄μ§€ν‘ μ—…λ°μ΄νΈ (PER, PBR, ROE, λ°°λ‹Ήμμµλ¥  λ“±)
  - μ„Ήν„° μ •λ³΄ μ •ν™•λ„ κ°μ„ 

#### 2. ν¬νΈν΄λ¦¬μ¤ μ•κ³ λ¦¬μ¦ κ²€μ¦ λ° νλ‹
- [ ] **μ‹¤μ  λ°μ΄ν„°λ΅ ν…μ¤νΈ**
  - λ³΄μν•/μ¤‘λ¦½ν•/κ³µκ²©ν• κ° μ„±ν–¥λ³„ ν¬νΈν΄λ¦¬μ¤ μƒμ„± ν…μ¤νΈ
  - μΆ…λ© μ„ μ • λ΅μ§ κ²€μ¦ (μ μ κ³„μ‚°, μ„Ήν„° λ‹¤κ°ν™”)
  - μ—£μ§€ μΌ€μ΄μ¤ μ²λ¦¬ (μΆ…λ© λ¶€μ΅±, μ„Ήν„° νΈμ¤‘ λ“±)

- [ ] **λ°±ν…μ¤νΈ κΈ°λ¥ κ°μ„ **
  - μ‹¤μ  κ³Όκ±° λ°μ΄ν„°λ΅ ν¬νΈν΄λ¦¬μ¤ μ„±κ³Ό μ‹λ®¬λ μ΄μ…
  - λ²¤μΉλ§ν¬ λ€λΉ„ μ„±κ³Ό λ¶„μ„ (KOSPI, KOSDAQ)
  - λ¦¬λ°Έλ°μ‹± ν¨κ³Ό κ²€μ¦

#### 3. μ‚¬μ©μ κ²½ν— κ°μ„ 
- [ ] **ν¬νΈν΄λ¦¬μ¤ νμ΄μ§€ κΈ°λ¥ μ¶”κ°€**
  - μ„Ήν„°λ³„ λΉ„μ¤‘ μ°¨νΈ μ‹κ°ν™” (Chart.js)
  - μΆ…λ©λ³„ μƒμ„Έ μ •λ³΄ λ¨λ‹¬ λλ” ν΄ν
  - ν¬νΈν΄λ¦¬μ¤ μ €μ¥ λ° λΉ„κµ κΈ°λ¥

- [ ] **μ—λ¬ μ²λ¦¬ κ°•ν™”**
  - μΆ…λ© λ°μ΄ν„° λ¶€μ΅± μ‹ μ‚¬μ©μ μΉν™”μ  λ©”μ‹μ§€
  - λ΅λ”© μƒνƒ κ°μ„  (μ¤μΌλ ν†¤ UI)
  - μ¤λ¥ λ°μƒ μ‹ λ³µκµ¬ μµμ… μ κ³µ

#### 4. PDF λ¦¬ν¬νΈ κ°μ„ 
- [ ] **μ°¨νΈ λ° μ‹κ°ν™” μ¶”κ°€**
  - μμ‚° λ°°λ¶„ νμ΄ μ°¨νΈ
  - μ„Ήν„°λ³„ λΉ„μ¤‘ λ§‰λ€ κ·Έλν”„
  - μμƒ μμµλ¥  κ·Έλν”„

- [ ] **λ¦¬ν¬νΈ λ‚΄μ© λ³΄κ°•**
  - ν¬μ μ „λµ μƒμ„Έ μ„¤λ…
  - μΆ…λ©λ³„ μ„ μ • μ΄μ 
  - λ¦¬μ¤ν¬ κ΄€λ¦¬ κ°€μ΄λ“

### μ¤‘κΈ° λ©ν‘ (1μ£ΌμΌ ~ 1κ°μ›”)

#### 5. μ‹¤μ‹κ°„ λ°μ΄ν„° μ—°λ™
- [ ] **μλ™ λ°μ΄ν„° μ—…λ°μ΄νΈ**
  - λ°°μΉ μ‘μ—…μΌλ΅ λ§¤μΌ μ¥ λ§κ° ν›„ μ£Όκ°€ μ—…λ°μ΄νΈ
  - μ¬λ¬΄μ§€ν‘ λ¶„κΈ°λ³„ μλ™ μ—…λ°μ΄νΈ
  - μ‹μ¥ μ§€μ μ‹¤μ‹κ°„ λ°μ

#### 6. κ°μΈν™” κΈ°λ¥ κ°•ν™”
- [ ] **ν¬νΈν΄λ¦¬μ¤ λ§μ¶¤ν™” μµμ…**
  - μ„Ήν„° μ„ νΈλ„ μ„¤μ • UI
  - νΉμ • μΆ…λ© μ μ™Έ κΈ°λ¥
  - ESG ν¬μ μµμ…

- [ ] **ν¬νΈν΄λ¦¬μ¤ μ¶”μ  κΈ°λ¥**
  - μ‚¬μ©μμ μ‹¤μ  ν¬μ ν¬νΈν΄λ¦¬μ¤ λ“±λ΅
  - μ‹¤μ‹κ°„ μμµλ¥  μ¶”μ 
  - λ¦¬λ°Έλ°μ‹± μ•λ¦Ό

#### 7. κ΄€λ¦¬μ κΈ°λ¥ κ°μ„ 
- [ ] **λ°μ΄ν„° κ΄€λ¦¬ λ„κµ¬**
  - μΆ…λ© λ°μ΄ν„° μΌκ΄„ μμ • UI
  - μ•κ³ λ¦¬μ¦ νλΌλ―Έν„° μ΅°μ • μΈν„°νμ΄μ¤
  - μ‚¬μ©μ ν¬νΈν΄λ¦¬μ¤ ν†µκ³„ λ€μ‹λ³΄λ“

### μ¥κΈ° λ©ν‘ (1κ°μ›” μ΄μƒ)

#### 8. κ³ κΈ‰ λ¶„μ„ κΈ°λ¥
- [ ] **ν€€νΈ μ „λµ μ¶”κ°€**
  - λ¨λ©ν…€ μ „λµ
  - λ°Έλ¥ μ „λµ
  - μ €λ³€λ™μ„± μ „λµ

- [ ] **λ¦¬μ¤ν¬ λ¶„μ„ κ³ λ„ν™”**
  - VaR (Value at Risk) κ³„μ‚°
  - μƒ¤ν”„ λΉ„μ¨, μ†ν‹°λ…Έ λΉ„μ¨
  - μµλ€ λ‚™ν­ (MDD) λ¶„μ„

#### 9. AI κΈ°λ¥ ν†µν•©
- [ ] **Claude AI λ¶„μ„ ν™μ„±ν™”**
  - ANTHROPIC_API_KEY μ„¤μ •
  - ν¬νΈν΄λ¦¬μ¤ ν•΄μ„ λ° μ΅°μ–Έ
  - μ‹μ¥ λ‰΄μ¤ κΈ°λ° μΈμ‚¬μ΄νΈ

#### 10. λ°°ν¬ λ° μ΄μ
- [ ] **ν”„λ΅λ•μ… λ°°ν¬**
  - Render.com μ„¤μ • μµμ ν™”
  - ν™κ²½ λ³€μ κ΄€λ¦¬
  - λ΅κΉ… λ° λ¨λ‹ν„°λ§ μ„¤μ •

- [ ] **μ„±λ¥ μµμ ν™”**
  - λ°μ΄ν„°λ² μ΄μ¤ μΈλ±μ‹±
  - API μ‘λ‹µ μΊμ‹±
  - ν”„λ΅ νΈμ—”λ“ λ²λ“¤ μµμ ν™”

---

## π“ ν„μ¬ μ‹μ¤ν… μƒνƒ

### μ‹¤ν–‰ μ¤‘μΈ μ„λ²„
- **λ°±μ—”λ“**: `http://localhost:8000` (FastAPI + Uvicorn, --reload)
- **ν”„λ΅ νΈμ—”λ“**: `http://localhost:5173` (Vite Dev Server)

### μµκ·Ό μ»¤λ°‹ νμ¤ν† λ¦¬
```
f2af023 - fix: Fix portfolio generation error and improve UI consistency
27646b1 - feat: Improve portfolio recommendation algorithm
576ab34 - fix: Improve stock data fetching reliability with pykrx
f8f21c0 - feat: Add real-time stock price data using pykrx
5c2fd9e - fix: Correct market index price calculation for accurate daily changes
44cc6c4 - fix: Add PDF generation dependencies to requirements.txt
```

### ν•µμ‹¬ κΈ°μ  μ¤νƒ
- **Backend**: Python 3.11, FastAPI, SQLAlchemy, pykrx, yfinance
- **Frontend**: React 18, Vite, Chart.js, React Router
- **Database**: SQLite (κ°λ°), PostgreSQL (ν”„λ΅λ•μ… μμ •)
- **Deployment**: Render.com (μ„¤μ • μ™„λ£)

### μ•λ ¤μ§„ μ΄μ
- [ ] ANTHROPIC_API_KEY λ―Έμ„¤μ • (Claude AI λ¶„μ„ λΉ„ν™μ„±ν™” μƒνƒ)
- [ ] Stock λ°μ΄ν„°λ² μ΄μ¤μ— μ‹¤μ  λ°μ΄ν„°κ°€ μ¶©λ¶„ν•μ§€ λ―Έν™•μΈ
- [ ] λ°±ν…μ¤νΈ κΈ°λ¥ μ‹¤μ  λ°μ΄ν„° κ²€μ¦ ν•„μ”

---

## π― μ°μ„ μμ„ μ¶”μ²

### μ¦‰μ‹ μν–‰ (High Priority)
1. **Stock λ°μ΄ν„°λ² μ΄μ¤ κ²€μ¦ λ° λ³΄κ°•** - ν¬νΈν΄λ¦¬μ¤ ν’μ§μ ν•µμ‹¬
2. **μ‹¤μ  λ°μ΄ν„°λ΅ ν¬νΈν΄λ¦¬μ¤ μƒμ„± ν…μ¤νΈ** - μ•κ³ λ¦¬μ¦ κ²€μ¦
3. **μ„Ήν„°λ³„ λΉ„μ¤‘ μ°¨νΈ μ‹κ°ν™”** - μ‚¬μ©μ κ²½ν— κ°μ„ 

### μ΄λ² μ£Ό λ‚΄ (Medium Priority)
4. **PDF λ¦¬ν¬νΈ μ°¨νΈ μ¶”κ°€** - μ™„μ„±λ„ ν–¥μƒ
5. **μ—λ¬ μ²λ¦¬ λ° λ΅λ”© UI κ°μ„ ** - μ•μ •μ„±
6. **λ°°μΉ μ‘μ—…μΌλ΅ λ°μ΄ν„° μλ™ μ—…λ°μ΄νΈ** - μ΄μ ν¨μ¨μ„±

### μ—¬μ  μμ„ λ• (Low Priority)
7. **ν¬νΈν΄λ¦¬μ¤ μ €μ¥ λ° λΉ„κµ κΈ°λ¥**
8. **κ΄€λ¦¬μ λ„κµ¬ κ°μ„ **
9. **κ³ κΈ‰ ν€€νΈ μ „λµ μ—°κµ¬ λ° κµ¬ν„**

---

## π“ μ°Έκ³  λ¬Έμ„
- `portfolio_recommendation_algorithm.md` - ν¬νΈν΄λ¦¬μ¤ μ¶”μ² μ•κ³ λ¦¬μ¦ μƒμ„Έ λ…μ„Έ
- `/backend/app/services/portfolio_engine.py` - ν•µμ‹¬ μ•κ³ λ¦¬μ¦ κµ¬ν„
- `/backend/app/routes/market.py` - μ‹μ¥ λ°μ΄ν„° API
- `/frontend/src/pages/PortfolioRecommendationPage.jsx` - ν¬νΈν΄λ¦¬μ¤ UI

---

**μ‘μ„±μΌ**: 2026-01-07
**μ‘μ„±μ**: Claude Sonnet 4.5 (KingoPortfolio Development Assistant)
**λ§μ§€λ§‰ μ—…λ°μ΄νΈ**: μ„Έμ… μΆ…λ£ μ‹μ 

# ğŸ—ï¸ **KingoPortfolio ì•„í‚¤í…ì²˜ ë° ê¸°ìˆ  ìƒì„¸ ë¬¸ì„œ**

## ëª©ì°¨
1. [ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜](#ì‹œìŠ¤í…œ-ì•„í‚¤í…ì²˜)
2. [ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„](#ë°ì´í„°ë² ì´ìŠ¤-ì„¤ê³„)
3. [API ëª…ì„¸](#api-ëª…ì„¸)
4. [ì½”ë“œ êµ¬ì¡°](#ì½”ë“œ-êµ¬ì¡°)
5. [ë°°í¬ í™˜ê²½](#ë°°í¬-í™˜ê²½)

---

# ğŸ—ï¸ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

## ì „ì²´ ì•„í‚¤í…ì²˜ ë‹¤ì´ì–´ê·¸ë¨

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ì™¸ë¶€ ì‚¬ìš©ì                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                â”‚                â”‚
   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
   â”‚ ë¸Œë¼ìš°ì € â”‚     â”‚ìŠ¤ë§ˆíŠ¸í° â”‚     â”‚ íƒœë¸”ë¦¿  â”‚
   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
        â”‚                â”‚                â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚ HTTPS
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   Vercel (í”„ë¡ íŠ¸ì—”ë“œ)           â”‚
        â”‚   - React + Vite               â”‚
        â”‚   - ë²ˆë“¤ë§ & CDN ë°°í¬          â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚ API í˜¸ì¶œ
                         â”‚ (HTTPS)
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   Render (ë°±ì—”ë“œ)               â”‚
        â”‚   - FastAPI                    â”‚
        â”‚   - Python 3.11                â”‚
        â”‚                                â”‚
        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
        â”‚  â”‚  API ë¼ìš°í„°              â”‚  â”‚
        â”‚  â”‚  - /auth                 â”‚  â”‚
        â”‚  â”‚  - /survey               â”‚  â”‚
        â”‚  â”‚  - /diagnosis            â”‚  â”‚
        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
        â”‚            â”‚                   â”‚
        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
        â”‚  â”‚  ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ (CRUD)   â”‚   â”‚
        â”‚  â”‚  - ì‚¬ìš©ì ê´€ë¦¬         â”‚   â”‚
        â”‚  â”‚  - ì„¤ë¬¸ ì²˜ë¦¬           â”‚   â”‚
        â”‚  â”‚  - ì§„ë‹¨ ê³„ì‚°           â”‚   â”‚
        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
        â”‚            â”‚                   â”‚
        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
        â”‚  â”‚  SQLAlchemy ORM        â”‚   â”‚
        â”‚  â”‚  - ëª¨ë¸ ì •ì˜           â”‚   â”‚
        â”‚  â”‚  - ë°ì´í„° ë§¤í•‘         â”‚   â”‚
        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  SQLite Database        â”‚
        â”‚  - users                â”‚
        â”‚  - survey_questions     â”‚
        â”‚  - diagnoses            â”‚
        â”‚  - diagnosis_answers    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ì•„í‚¤í…ì²˜ íŠ¹ì§•

### ê³„ì¸µ êµ¬ì¡° (Layered Architecture)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      í”„ë ˆì  í…Œì´ì…˜ ê³„ì¸µ              â”‚
â”‚      (React + Vercel)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      API ê³„ì¸µ                       â”‚
â”‚      (FastAPI ë¼ìš°í„°)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ê³„ì¸µ              â”‚
â”‚      (CRUD, ì§„ë‹¨ ê³„ì‚°)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      ë°ì´í„° ì ‘ê·¼ ê³„ì¸µ                â”‚
â”‚      (SQLAlchemy ORM)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      ë°ì´í„°ë² ì´ìŠ¤ ê³„ì¸µ              â”‚
â”‚      (SQLite)                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

# ğŸ—„ï¸ ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„

## ER ë‹¤ì´ì–´ê·¸ë¨

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        User          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)              â”‚
â”‚ email (UNIQUE)       â”‚
â”‚ hashed_password      â”‚
â”‚ name                 â”‚
â”‚ created_at           â”‚
â”‚ updated_at           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ 1:N
           â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Diagnosis        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)              â”‚
â”‚ user_id (FK)         â”‚
â”‚ investment_type      â”‚
â”‚ score                â”‚
â”‚ confidence           â”‚
â”‚ monthly_investment   â”‚
â”‚ created_at           â”‚
â”‚ updated_at           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ 1:N
           â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  DiagnosisAnswer     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)              â”‚
â”‚ diagnosis_id (FK)    â”‚
â”‚ question_id          â”‚
â”‚ answer_value (1-5)   â”‚
â”‚ created_at           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   SurveyQuestion     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)              â”‚
â”‚ category             â”‚
â”‚ question             â”‚
â”‚ option_a             â”‚
â”‚ option_b             â”‚
â”‚ option_c (NULL OK)   â”‚
â”‚ weight_a             â”‚
â”‚ weight_b             â”‚
â”‚ weight_c (NULL OK)   â”‚
â”‚ created_at           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## í…Œì´ë¸” ìƒì„¸ ì„¤ëª…

### users í…Œì´ë¸”

```sql
CREATE TABLE users (
    id VARCHAR(36) PRIMARY KEY,  -- UUID
    email VARCHAR(100) UNIQUE NOT NULL,
    hashed_password VARCHAR(255) NOT NULL,
    name VARCHAR(50) NULL,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP
);
```

**ìš©ë„**: ì‚¬ìš©ì ê¸°ë³¸ ì •ë³´ ì €ì¥
**ê´€ê³„**: Diagnosis 1:N

---

### survey_questions í…Œì´ë¸”

```sql
CREATE TABLE survey_questions (
    id INTEGER PRIMARY KEY,
    category VARCHAR(50) NOT NULL,  -- 'experience', 'duration', 'risk', 'knowledge', 'amount'
    question VARCHAR(255) NOT NULL,
    option_a VARCHAR(100) NOT NULL,
    option_b VARCHAR(100) NOT NULL,
    option_c VARCHAR(100) NULL,
    weight_a FLOAT NOT NULL,        -- ì„ íƒì§€ë³„ ì ìˆ˜
    weight_b FLOAT NOT NULL,
    weight_c FLOAT NULL,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP
);
```

**ìš©ë„**: ì„¤ë¬¸ ë¬¸í•­ ë°ì´í„° ì €ì¥
**íŠ¹ì§•**: 
- ì´ 15ê°œ ìë™ ìƒì„±
- 5ê°€ì§€ ì¹´í…Œê³ ë¦¬
- ê° ì¹´í…Œê³ ë¦¬ë³„ 2-3ê°œ ë¬¸í•­

---

### diagnoses í…Œì´ë¸”

```sql
CREATE TABLE diagnoses (
    id VARCHAR(36) PRIMARY KEY,  -- UUID
    user_id VARCHAR(36) NOT NULL,  -- FK
    investment_type VARCHAR(20) NOT NULL,  -- 'conservative', 'moderate', 'aggressive'
    score FLOAT NOT NULL,          -- 0-10 ì ìˆ˜
    confidence FLOAT NOT NULL,     -- 0-1 ì‹ ë¢°ë„
    monthly_investment INTEGER NULL,  -- ì›” íˆ¬ìì•¡ (ë§Œì›)
    notes TEXT NULL,               -- ì¶”ê°€ ë©”ëª¨
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE
);
```

**ìš©ë„**: ì§„ë‹¨ ê²°ê³¼ ì €ì¥
**íŠ¹ì§•**:
- ì‚¬ìš©ìë‹¹ ì—¬ëŸ¬ ì§„ë‹¨ ê¸°ë¡
- ì‹œê°„ë³„ ë³€í™” ì¶”ì  ê°€ëŠ¥

---

### diagnosis_answers í…Œì´ë¸”

```sql
CREATE TABLE diagnosis_answers (
    id VARCHAR(36) PRIMARY KEY,  -- UUID
    diagnosis_id VARCHAR(36) NOT NULL,  -- FK
    question_id INTEGER NOT NULL,
    answer_value INTEGER NOT NULL,  -- 1-5
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (diagnosis_id) REFERENCES diagnoses(id) ON DELETE CASCADE
);
```

**ìš©ë„**: ì§„ë‹¨ ë‹µë³€ ìƒì„¸ ì €ì¥
**íŠ¹ì§•**:
- ì§„ë‹¨ë³„ 15ê°œ ë‹µë³€ ì €ì¥
- ì¶”í›„ ë¶„ì„ì„ ìœ„í•œ ì›ë³¸ ë°ì´í„° ë³´ê´€

---

# ğŸ“¡ API ëª…ì„¸

## ì¸ì¦ API

### POST /auth/signup - íšŒì›ê°€ì…

```http
POST https://kingo-backend.onrender.com/auth/signup
Content-Type: application/json

{
  "email": "user@example.com",
  "password": "password123456",  # ìµœì†Œ 8ì, ìµœëŒ€ 72ë°”ì´íŠ¸
  "name": "ì‚¬ìš©ì"
}
```

**ì‘ë‹µ (201 Created)**
```json
{
  "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "token_type": "bearer",
  "user": {
    "id": "550e8400-e29b-41d4-a716-446655440000",
    "email": "user@example.com",
    "name": "ì‚¬ìš©ì",
    "created_at": "2025-12-17T00:00:00"
  }
}
```

**ì—ëŸ¬ ì‘ë‹µ**
```json
{
  "detail": "Email already registered"  # 400
}
```

---

### POST /auth/login - ë¡œê·¸ì¸

```http
POST https://kingo-backend.onrender.com/auth/login
Content-Type: application/json

{
  "email": "user@example.com",
  "password": "password123456"
}
```

**ì‘ë‹µ (200 OK)**
```json
{
  "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "token_type": "bearer",
  "user": {
    "id": "550e8400-e29b-41d4-a716-446655440000",
    "email": "user@example.com",
    "name": "ì‚¬ìš©ì",
    "created_at": "2025-12-17T00:00:00"
  }
}
```

---

## ì„¤ë¬¸ API

### GET /survey/questions - ì„¤ë¬¸ ì¡°íšŒ

```http
GET https://kingo-backend.onrender.com/survey/questions
```

**ì‘ë‹µ (200 OK)**
```json
{
  "total": 15,
  "questions": [
    {
      "id": 1,
      "category": "experience",
      "question": "ë‹¹ì‹ ì˜ íˆ¬ì ê²½í—˜ì€?",
      "options": [
        {
          "value": "A",
          "text": "ì²˜ìŒì…ë‹ˆë‹¤ (íˆ¬ì ê²½í—˜ ì—†ìŒ)",
          "weight": 1.0
        },
        {
          "value": "B",
          "text": "ì•½ê°„ ìˆìŠµë‹ˆë‹¤ (1-2ë…„)",
          "weight": 2.0
        },
        {
          "value": "C",
          "text": "ì¶©ë¶„í•©ë‹ˆë‹¤ (3ë…„ ì´ìƒ)",
          "weight": 3.0
        }
      ]
    },
    ...
  ]
}
```

---

## ì§„ë‹¨ API

### POST /diagnosis/submit - ì§„ë‹¨ ì œì¶œ

```http
POST https://kingo-backend.onrender.com/diagnosis/submit
Authorization: Bearer {access_token}
Content-Type: application/json

{
  "answers": [
    {
      "question_id": 1,
      "answer_value": 1
    },
    {
      "question_id": 2,
      "answer_value": 2
    },
    ...
  ],
  "monthly_investment": 100  # ì›” íˆ¬ìì•¡ (ë§Œì›), ì„ íƒì‚¬í•­
}
```

**ì‘ë‹µ (201 Created)**
```json
{
  "diagnosis_id": "550e8400-e29b-41d4-a716-446655440001",
  "investment_type": "moderate",
  "score": 5.5,
  "confidence": 0.85,
  "monthly_investment": 100,
  "description": "ì•ˆì •ì„±ê³¼ ìˆ˜ìµì„±ì„ ëª¨ë‘ ì¶”êµ¬í•˜ëŠ” ê· í˜•ì¡íŒ íˆ¬ììì…ë‹ˆë‹¤...",
  "characteristics": [
    "ì ì • ìˆ˜ì¤€ì˜ ìœ„í—˜ì„ ê°ìˆ˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤",
    "ì•ˆì •ì„±ê³¼ ìˆ˜ìµì„±ì˜ ê· í˜•ì„ ì›í•©ë‹ˆë‹¤",
    ...
  ],
  "recommended_ratio": {
    "stocks": 40,
    "bonds": 25,
    "money_market": 20,
    "gold": 10,
    "other": 5
  },
  "expected_annual_return": "6-8%",
  "created_at": "2025-12-17T00:00:00"
}
```

---

### GET /diagnosis/me - ìµœê·¼ ì§„ë‹¨ ì¡°íšŒ

```http
GET https://kingo-backend.onrender.com/diagnosis/me
Authorization: Bearer {access_token}
```

**ì‘ë‹µ (200 OK)**
```json
{
  "diagnosis_id": "550e8400-e29b-41d4-a716-446655440001",
  "investment_type": "moderate",
  "score": 5.5,
  "confidence": 0.85,
  ...
}
```

---

# ğŸ“ ì½”ë“œ êµ¬ì¡°

## ë°±ì—”ë“œ ë””ë ‰í† ë¦¬ êµ¬ì¡°

```
FinPortfolio-Backend/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ main.py                 # FastAPI ì•± ì´ˆê¸°í™”, ë¼ìš°í„° ì—°ê²°
â”‚   â”œâ”€â”€ config.py               # í™˜ê²½ë³€ìˆ˜ ë° ì„¤ì •
â”‚   â”œâ”€â”€ database.py             # SQLAlchemy ì„¤ì •
â”‚   â”œâ”€â”€ auth.py                 # JWT, bcrypt ì¸ì¦ ë¡œì§
â”‚   â”œâ”€â”€ models.py               # SQLAlchemy ëª¨ë¸
â”‚   â”œâ”€â”€ schemas.py              # Pydantic ìŠ¤í‚¤ë§ˆ
â”‚   â”œâ”€â”€ crud.py                 # ë°ì´í„°ë² ì´ìŠ¤ CRUD ì‘ì—…
â”‚   â”œâ”€â”€ diagnosis.py            # ì§„ë‹¨ ê³„ì‚° ë¡œì§
â”‚   â”‚
â”‚   â”œâ”€â”€ routes/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ auth.py             # ì¸ì¦ ì—”ë“œí¬ì¸íŠ¸
â”‚   â”‚   â”œâ”€â”€ survey.py           # ì„¤ë¬¸ ì—”ë“œí¬ì¸íŠ¸
â”‚   â”‚   â””â”€â”€ diagnosis.py        # ì§„ë‹¨ ì—”ë“œí¬ì¸íŠ¸
â”‚   â”‚
â”‚   â””â”€â”€ (other files)
â”‚
â”œâ”€â”€ requirements.txt            # íŒ¨í‚¤ì§€ ì˜ì¡´ì„±
â”œâ”€â”€ Procfile                    # Render ë°°í¬ ì„¤ì •
â”œâ”€â”€ runtime.txt                 # Python ë²„ì „
â”œâ”€â”€ .gitignore
â”œâ”€â”€ README.md
â””â”€â”€ kingo.db                    # SQLite ë°ì´í„°ë² ì´ìŠ¤
```

## ì£¼ìš” íŒŒì¼ ì—­í• 

### main.py
```python
# FastAPI ì•± ì´ˆê¸°í™”
app = FastAPI(title="KingoPortfolio")

# CORS ë¯¸ë“¤ì›¨ì–´ ì¶”ê°€
app.add_middleware(CORSMiddleware, ...)

# ë¼ìš°í„° ë“±ë¡
app.include_router(auth.router)
app.include_router(survey.router)
app.include_router(diagnosis.router)

# ì´ˆê¸°í™”
@asynccontextmanager
async def lifespan(app: FastAPI):
    # ì‹œì‘: DB ìƒì„±, ì„¤ë¬¸ ì´ˆê¸°í™”
    init_db()
    yield
    # ì¢…ë£Œ: ë¦¬ì†ŒìŠ¤ ì •ë¦¬
```

### models.py
```python
class User(Base):
    __tablename__ = "users"
    id: String = Column(String, primary_key=True)
    email: String = Column(String(100), unique=True)
    hashed_password: String = Column(String(255))
    name: String = Column(String(50), nullable=True)
    diagnoses = relationship("Diagnosis", ...)

class Diagnosis(Base):
    __tablename__ = "diagnoses"
    id: String = Column(String, primary_key=True)
    user_id: String = Column(String, ForeignKey("users.id"))
    investment_type: String = Column(String(20))
    score: Float = Column(Float)
    confidence: Float = Column(Float)
    user = relationship("User", back_populates="diagnoses")
```

### auth.py
```python
# ë¹„ë°€ë²ˆí˜¸ í•´ì‹œ
def hash_password(password: str) -> str:
    if len(password.encode('utf-8')) > 72:
        raise ValueError("72ë°”ì´íŠ¸ ì´ˆê³¼")
    return pwd_context.hash(password)

# JWT í† í° ìƒì„±
def create_access_token(data: dict, expires_delta: timedelta):
    to_encode = data.copy()
    expire = datetime.utcnow() + expires_delta
    encoded_jwt = jwt.encode(to_encode, settings.secret_key, settings.algorithm)
    return encoded_jwt
```

### crud.py
```python
# ì‚¬ìš©ì ìƒì„±
def create_user(db: Session, user_create: UserCreate):
    hashed_password = hash_password(user_create.password)
    db_user = User(
        email=user_create.email,
        hashed_password=hashed_password,
        name=user_create.name
    )
    db.add(db_user)
    db.commit()
    return db_user

# ì§„ë‹¨ ìƒì„±
def create_diagnosis(db: Session, user_id: str, investment_type: str, score: float, confidence: float):
    diagnosis = Diagnosis(
        user_id=user_id,
        investment_type=investment_type,
        score=score,
        confidence=confidence
    )
    db.add(diagnosis)
    db.commit()
    return diagnosis
```

### diagnosis.py
```python
# ì§„ë‹¨ ê³„ì‚°
def calculate_diagnosis(answers: List[DiagnosisAnswerRequest]) -> tuple:
    # ë‹µë³€ ê°’ í‰ê· 
    avg = sum(ans.answer_value for ans in answers) / len(answers)
    
    # 0-10 ë²”ìœ„ë¡œ ì •ê·œí™”
    score = (avg - 1) * 2.5
    
    # ì„±í–¥ ë¶„ë¥˜
    if score < 3.33:
        investment_type = "conservative"
    elif score < 6.67:
        investment_type = "moderate"
    else:
        investment_type = "aggressive"
    
    # ì‹ ë¢°ë„ ê³„ì‚° (ì¼ê´€ì„±)
    confidence = calculate_confidence(answers)
    
    return investment_type, score, confidence
```

---

# ğŸš€ ë°°í¬ í™˜ê²½

## Render ë°°í¬ ì„¤ì •

### Procfile
```
web: uvicorn app.main:app --host 0.0.0.0 --port $PORT
```

### runtime.txt
```
python-3.11.14
```

### í™˜ê²½ë³€ìˆ˜

| ë³€ìˆ˜ëª… | ê°’ | ìš©ë„ |
|--------|-----|------|
| SECRET_KEY | (32ì ì´ìƒ) | JWT ì„œëª… |
| ALLOWED_ORIGINS | https://kingo-portfolio-*.vercel.app | CORS |
| DATABASE_URL | (ë¯¸ì„¤ì •) | SQLite ì‚¬ìš© |

### ë°°í¬ í”„ë¡œì„¸ìŠ¤

```
1. GitHubì— ì½”ë“œ í‘¸ì‹œ
2. Renderì—ì„œ ìë™ ê°ì§€
3. í™˜ê²½ ì„¤ì • ë¡œë“œ
4. ì˜ì¡´ì„± ì„¤ì¹˜ (pip install -r requirements.txt)
5. ì•± ì‹œì‘ (uvicorn)
6. https://kingo-backend.onrender.comì—ì„œ ì ‘ì† ê°€ëŠ¥
```

---

## í”„ë¡ íŠ¸ì—”ë“œ ë°°í¬ (Vercel)

### build ëª…ë ¹ì–´
```bash
npm run build
```

### ë°°í¬ í”„ë¡œì„¸ìŠ¤

```
1. GitHubì— ì½”ë“œ í‘¸ì‹œ
2. Vercelì—ì„œ ìë™ ê°ì§€
3. Node.js í™˜ê²½ ì„¤ì •
4. ì˜ì¡´ì„± ì„¤ì¹˜ (npm install)
5. ë¹Œë“œ (npm run build)
6. ë°°í¬ (CDN ë°°í¬)
7. https://kingo-portfolio-*.vercel.appì—ì„œ ì ‘ì† ê°€ëŠ¥
```

---

# ğŸ“Š ì„±ëŠ¥ ë©”íŠ¸ë¦­

## API ì‘ë‹µì‹œê°„ (ëª©í‘œ)

| ì—”ë“œí¬ì¸íŠ¸ | ëª©í‘œ | í˜„ì¬ |
|-----------|------|------|
| GET /survey/questions | <500ms | ~300ms âœ… |
| POST /auth/signup | <1000ms | ~800ms âœ… |
| POST /auth/login | <800ms | ~600ms âœ… |
| POST /diagnosis/submit | <1000ms | ~900ms âœ… |
| GET /diagnosis/me | <500ms | ~400ms âœ… |

## ë°ì´í„°ë² ì´ìŠ¤ í¬ê¸°

| í…Œì´ë¸” | ë ˆì½”ë“œ ìˆ˜ | í¬ê¸° |
|--------|----------|------|
| users | ~0 | ~0KB |
| survey_questions | 15 | ~2KB |
| diagnoses | ~0 | ~0KB |
| diagnosis_answers | ~0 | ~0KB |
| **ì „ì²´** | **15+** | **~50KB** |

---

**ì´ ë¬¸ì„œëŠ” KingoPortfolioì˜ ê¸°ìˆ  ì•„í‚¤í…ì²˜ë¥¼ ìƒì„¸íˆ ì„¤ëª…í•©ë‹ˆë‹¤.**

ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸: 2025-12-17

# Phase 3-C / Epic C-6 상세 설계
최초작성일자: 2026-01-18
최종수정일자: 2026-01-18

## Epic ID
- **Epic**: C-6
- **명칭**: 배포·환경·릴리즈 관리 (Release & Environment Management)
- **Phase**: Phase 3-C

---

## 1. 목적 (Purpose)

Epic C-6의 목적은 서비스의 안정적 배포와 환경 일관성을 확보하고, 릴리즈/롤백/마이그레이션을 운영자가 예측 가능하게 수행하도록 하는 것이다.

---

## 2. 범위 (Scope)

### In-Scope
- 환경 분리(DEV/STAGE/PROD)
- 설정/시크릿 관리
- CI/CD 파이프라인 기준
- 릴리즈 절차 및 버전 관리
- 롤백 전략
- 마이그레이션/데이터 변경 통제
- 배포 후 모니터링 기준

### Out-of-Scope
- 인프라 자동 확장/오토스케일링 고도화
- 멀티 리전/DR(Disaster Recovery) 구축
- 완전 무중단 배포(Blue/Green) 고도화

---

## 3. 환경 정의

| 환경 | 목적 | 접근 |
|---|---|---|
| DEV | 개발/테스트 | 개발자 전용 |
| STAGE | 사전 검증 | 운영/QA |
| PROD | 실제 서비스 | 운영자 |

환경별 분리 항목:
- DB 스키마/데이터
- 외부 API 키
- 알림 채널
- 로그/모니터링 대상

---

## 4. 설정/시크릿 관리

- 환경 변수 기반 관리(`.env`)
- 민감정보는 별도 시크릿 스토어에 저장
- 배포 시 CI/CD에서 주입
- 로컬 환경은 샘플 `.env.example` 유지

---

## 5. CI/CD 기준

### 5.1 브랜치 정책
- `main`: 배포 기준
- `develop`: 통합 개발
- `feature/*`: 기능 개발
- `hotfix/*`: 긴급 수정

### 5.2 파이프라인 단계
1) Lint/Test
2) Build
3) DB Migration
4) Deploy
5) Smoke Test

---

## 6. 릴리즈 절차

### 6.1 릴리즈 단위
- 버전: `YYYY.MM.DD+build` 또는 `vX.Y.Z`
- 릴리즈 노트 필수(기능/변경/리스크)

### 6.2 승인 게이트
- STAGE 테스트 통과
- Go-Live 체크리스트 통과
- 운영자 승인

---

## 7. 롤백 전략

- DB 변경과 앱 배포를 분리
- 롤백 가능한 Migration만 배포
- 문제가 발생하면 이전 버전으로 복원 후 로그/메트릭 확인

---

## 8. 마이그레이션 통제

- 모든 DDL은 스크립트로 관리
- 실행 전/후 체크리스트 기록
- 스키마 변경 후 API 호환성 확인

---

## 9. 모니터링/알림 기준

- 배포 후 30분 이내 핵심 지표 확인
- 오류율/응답시간/실패율 임계치 설정
- 운영 알림 채널 활성화

---

## 10. 완료 기준 (Definition of Done)

- [ ] 환경 분리 및 구성 확인
- [ ] 배포 파이프라인 정의 완료
- [ ] 릴리즈/롤백 절차 문서화
- [ ] 마이그레이션 통제 정책 정의
- [ ] 배포 후 모니터링 기준 확정

---

## 11. 관련 문서
- `docs/phase3/20260118_20260118_phase3c_go_live_readiness_checklist.md`
- `docs/phase3/20260118_20260118_c1_c3_go_live_checklist.md`
- `docs/phase3/20260118_20260118_c4_validation_checklist.md`

---

*본 문서는 Phase 3-C Epic C-6의 기준 설계 문서이며, 배포/환경/릴리즈 관리의 단일 기준으로 사용된다.*

# ForestoCompass 규제 대응 문서

**문서 버전**: 1.0
**작성일**: 2026-01-16
**대상**: 법무팀, 컴플라이언스팀, 감사팀, 규제기관

---

## 1. 문서 목적

본 문서는 ForestoCompass가 **투자 추천을 수행하지 않는다**는 점을
기술적 구현 관점에서 입증하기 위한 규제 대응 자료입니다.

---

## 2. 핵심 원칙: "추천 없음" 구조

### 2.1 설계 원칙

```
┌─────────────────────────────────────────────────────────────┐
│                ForestoCompass는 다음을 하지 않습니다          │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ✗ 특정 자산/종목 매수/매도 추천                             │
│  ✗ "이 포트폴리오가 더 좋습니다" 판단                        │
│  ✗ 미래 수익률 예측                                         │
│  ✗ 투자 조언/자문 제공                                      │
│  ✗ 개인화된 투자 전략 제안                                  │
│                                                             │
├─────────────────────────────────────────────────────────────┤
│                ForestoCompass가 하는 일                      │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ✓ 과거 데이터 기반 시뮬레이션 계산                          │
│  ✓ 정량적 지표(KPI) 제공 (CAGR, MDD 등)                     │
│  ✓ 두 시나리오의 수치 차이 비교                              │
│  ✓ 교육/정보 목적의 차트 시각화                              │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

---

## 3. 기술적 구현 증거

### 3.1 금지 용어 배제

시스템 전체에서 다음 용어의 사용을 **코드 레벨에서 금지**합니다:

| 금지 용어 (한글) | 금지 용어 (영문) | 적용 범위 |
|-----------------|-----------------|-----------|
| 추천 | recommend | API 응답, UI 텍스트 |
| 유리 | better, superior | 비교 분석 결과 |
| 최적 | optimal, best | 포트폴리오 설명 |
| 권장 | advised, suggested | 모든 출력 |

### 3.2 코드 검증 (테스트 케이스)

```python
# test_performance_analyzer.py - TestDoDChecklist 클래스

def test_no_recommendation_language(self):
    """추천/유리/최적 표현 없음 확인"""
    result = compare_metrics(metrics_a, metrics_b)

    note = result.get("note", "")
    forbidden_words = ["추천", "유리", "최적", "recommend", "better", "optimal"]

    for word in forbidden_words:
        assert word.lower() not in note.lower()
```

**테스트 결과**: 27개 테스트 중 해당 검증 통과

### 3.3 API 응답 구조

**비교 분석 API 응답 예시:**

```json
{
  "success": true,
  "comparison": {
    "delta": {
      "cagr": 0.05,
      "volatility": -0.03,
      "mdd": 0.04
    }
  },
  "note": "단순 수치 비교를 제공합니다. 과거 성과가 미래 수익을 보장하지 않습니다."
}
```

**주목할 점:**
- `delta`는 **수치 차이**만 제공
- "A가 B보다 좋다" 등의 **판단 없음**
- 면책 문구 필수 포함

---

## 4. 구조적 제약 (Architectural Constraints)

### 4.1 데이터 흐름 제약

```
┌─────────────┐     ┌─────────────┐     ┌─────────────┐
│  사용자     │     │  시뮬레이션  │     │  결과 출력  │
│  입력       │ ──► │  엔진       │ ──► │  (KPI만)    │
└─────────────┘     └─────────────┘     └─────────────┘
                          │
                          │ (금지)
                          ▼
                    ┌─────────────┐
                    │  추천 로직  │  ◄── 구현되지 않음
                    │  (없음)     │
                    └─────────────┘
```

### 4.2 Feature Flag 제어

```python
# config.py
feature_recommendation_engine: bool = os.getenv(
    "FEATURE_RECOMMENDATION_ENGINE",
    "0"  # 기본값: 비활성화
) in ("1", "true", "True", "yes")
```

**현재 상태**: `FEATURE_RECOMMENDATION_ENGINE = OFF (비활성화)`

---

## 5. 면책 문구 적용 현황

### 5.1 적용 위치

| 위치 | 문구 |
|------|------|
| API 응답 (`note` 필드) | "과거 데이터 기반 분석이며, 미래 수익을 보장하지 않습니다." |
| 비교 분석 응답 | "단순 수치 비교를 제공합니다." |
| 시뮬레이션 결과 | "본 시뮬레이션은 교육 목적이며, 미래 수익을 보장하지 않습니다." |
| API 문서 (Docstring) | 각 엔드포인트에 면책 문구 포함 |

### 5.2 코드 적용 예시

```python
# backtesting.py - GET /backtest/analysis/run/{run_id}

"""
⚠️ 과거 데이터 기반 분석이며, 미래 수익을 보장하지 않습니다.
"""

return {
    "success": True,
    **result,
    "message": "성과 분석 완료",
    "note": "과거 데이터 기반 분석이며, 미래 수익을 보장하지 않습니다.",
}
```

---

## 6. 감사 추적 (Audit Trail)

### 6.1 로깅 정책

| 항목 | 로그 여부 | 보관 기간 |
|------|-----------|-----------|
| API 요청/응답 | O | 90일 |
| 시뮬레이션 실행 | O | 영구 |
| 사용자 인증 | O | 1년 |
| 에러/예외 | O | 1년 |

### 6.2 결과 재현성

```python
# 시뮬레이션 결과에 포함되는 추적 정보
{
    "engine_version": "1.0.0",      # 계산 엔진 버전
    "request_hash": "abc123...",    # 요청 고유 식별자
    "cache_hit": true,              # 캐시 사용 여부
    "calculated_at": "2026-01-16"   # 계산 시점
}
```

**목적**: 동일 입력 → 동일 출력 보장 (결정론적 계산)

---

## 7. 규제 관련 Q&A

### Q1. ForestoCompass는 투자자문업 등록이 필요한가요?

**A**: 아니오. ForestoCompass는 다음 이유로 투자자문업에 해당하지 않습니다:

1. **특정 투자 판단을 제공하지 않음**
   - "이 종목을 사세요/파세요" 형태의 추천 없음
   - 비교 분석 시 "더 좋다/나쁘다" 판단 없음

2. **과거 데이터 기반 시뮬레이션만 제공**
   - 미래 수익 예측 기능 없음
   - 사용자가 직접 시나리오 선택

3. **교육/정보 제공 목적**
   - 투자 결정은 사용자 책임
   - 면책 문구 필수 표시

### Q2. 성과 지표(KPI) 제공이 투자 조언에 해당하나요?

**A**: 아니오. KPI는 **과거 데이터에 대한 정량적 분석**입니다:

- CAGR: 과거 연복리수익률 (역사적 사실)
- MDD: 과거 최대 낙폭 (역사적 사실)
- Sharpe: 과거 위험 대비 수익 비율 (계산 결과)

이는 미래 예측이 아닌 **과거 관측치 분석**입니다.

### Q3. 두 포트폴리오 비교 기능이 추천에 해당하나요?

**A**: 아니오. 비교 기능은 다음과 같이 제한됩니다:

```json
// 허용되는 출력
{ "delta": { "cagr": 0.05 } }  // 수치 차이만

// 금지된 출력 (시스템에 없음)
{ "recommendation": "A가 더 좋습니다" }
```

---

## 8. 규제 체크리스트

| 항목 | 준수 여부 | 증거 |
|------|-----------|------|
| 투자 추천 기능 없음 | ✅ | Feature Flag OFF, 코드 부재 |
| 금지 용어 배제 | ✅ | 단위 테스트 통과 |
| 면책 문구 적용 | ✅ | API 응답, UI 표시 |
| 결과 재현성 | ✅ | engine_version, request_hash |
| 감사 추적 | ✅ | 로깅 정책 적용 |
| 과거 데이터만 사용 | ✅ | 미래 예측 기능 없음 |

---

## 9. 결론

ForestoCompass는 **기술적 설계 단계부터** 투자 추천/자문 기능을
배제하도록 구현되었습니다.

- 추천 로직: **코드 레벨에서 존재하지 않음**
- 금지 용어: **테스트로 검증**
- 면책 문구: **모든 출력에 필수 포함**
- Feature Flag: **추천 엔진 비활성화**

본 시스템은 **교육 및 정보 제공 도구**로서,
사용자에게 과거 데이터 기반의 정량적 분석만을 제공합니다.

---

*본 문서는 규제 대응 목적의 공식 기술 문서입니다.*

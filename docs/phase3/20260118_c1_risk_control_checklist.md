# Epic C-1 리스크 통제 체크리스트
최초작성일자: 2026-01-18
최종수정일자: 2026-01-18

---
생성일자: 2026-01-18
Epic: C-1 (운영 안정성)
---

# Epic C-1 리스크 통제 체크리스트

## 1. 운영 리스크

### 1.1 배치 실행 리스크

| # | 리스크 | 영향도 | 통제 방안 | 검증 방법 |
|---|--------|--------|-----------|-----------|
| R1 | 배치 중복 실행 | HIGH | 멱등성 보장 (execution_id 기반) | 동일 ID 재실행 시 reject 테스트 |
| R2 | 배치 무한 대기 | MEDIUM | 타임아웃 설정 + 수동 중단 기능 | 타임아웃 시나리오 테스트 |
| R3 | 실패 상태 미기록 | HIGH | try-except-finally 패턴 강제 | 예외 발생 시 상태 검증 |
| R4 | 상태 전이 오류 | MEDIUM | 상태 머신 검증 로직 | 비정상 전이 시도 테스트 |

### 1.2 데이터 무결성 리스크

| # | 리스크 | 영향도 | 통제 방안 | 검증 방법 |
|---|--------|--------|-----------|-----------|
| R5 | 결과 데이터 덮어쓰기 | CRITICAL | 버전 관리 + is_active 패턴 | 재처리 후 이전 버전 보존 확인 |
| R6 | 참조 무결성 위반 | HIGH | FK 제약 + 애플리케이션 검증 | cascade 시나리오 테스트 |
| R7 | 동시 수정 충돌 | MEDIUM | DB 트랜잭션 + optimistic lock | 동시 실행 테스트 |

### 1.3 감사 추적 리스크

| # | 리스크 | 영향도 | 통제 방안 | 검증 방법 |
|---|--------|--------|-----------|-----------|
| R8 | 감사 로그 누락 | HIGH | 데코레이터/미들웨어 강제 | 수동 작업 시 로그 생성 확인 |
| R9 | 감사 로그 삭제 | CRITICAL | DELETE 권한 제거 + DB 감사 | DB 권한 검증 |
| R10 | 운영자 식별 누락 | HIGH | operator_id 필수 검증 | 미인증 요청 reject 테스트 |

---

## 2. 규제 리스크

### 2.1 데이터 보존 의무

| # | 리스크 | 영향도 | 통제 방안 | 검증 방법 |
|---|--------|--------|-----------|-----------|
| R11 | 기록 보존 기간 미충족 | MEDIUM | 보존 정책 정의 + 자동 아카이빙 | 보존 기간 설정 확인 |
| R12 | 변경 이력 미추적 | MEDIUM | before/after 상태 기록 | 감사 로그 상세 검증 |

### 2.2 정보 제공 서비스 포지션

| # | 리스크 | 영향도 | 통제 방안 | 검증 방법 |
|---|--------|--------|-----------|-----------|
| R13 | 추천/자문 기능 오해 | HIGH | Phase A Guard 연동 유지 | 설명 문구 금지어 검사 |
| R14 | 사용자 노출 메시지 부적절 | MEDIUM | 사용자/운영자 메시지 분리 | 오류 메시지 검토 |

---

## 3. 시스템 리스크

### 3.1 장애 복구

| # | 리스크 | 영향도 | 통제 방안 | 검증 방법 |
|---|--------|--------|-----------|-----------|
| R15 | DB 장애 시 상태 유실 | CRITICAL | 트랜잭션 + 재시도 로직 | DB 장애 시뮬레이션 |
| R16 | 외부 API 장애 전파 | HIGH | Circuit breaker + 타임아웃 | API 실패 시나리오 테스트 |
| R17 | 메모리 부족 | MEDIUM | 청크 처리 + 모니터링 | 대용량 데이터 테스트 |

### 3.2 모니터링

| # | 리스크 | 영향도 | 통제 방안 | 검증 방법 |
|---|--------|--------|-----------|-----------|
| R18 | 알림 발송 실패 | MEDIUM | 다중 채널 + 재시도 | 알림 실패 시나리오 테스트 |
| R19 | 알림 과다 발송 | LOW | 중복 제거 + 쿨다운 | 연속 실패 시 알림 횟수 확인 |

---

## 4. 구현 전 필수 확인 사항

### 4.1 DDL 적용 전

- [ ] 기존 테이블과 충돌 없음 확인
- [ ] FK 관계 정합성 확인
- [ ] 인덱스 설계 적절성 리뷰
- [ ] 초기 데이터 정합성 확인

### 4.2 서비스 구현 전

- [ ] 트랜잭션 경계 정의
- [ ] 예외 처리 전략 확정
- [ ] 로깅 레벨 및 포맷 확정
- [ ] 테스트 시나리오 작성

### 4.3 API 배포 전

- [ ] 관리자 권한 검증 로직 확인
- [ ] Rate limiting 설정
- [ ] 입력 검증 로직 확인
- [ ] API 문서 정합성 확인

---

## 5. 운영 전 필수 확인 사항 (Go-Live Checklist)

### 5.1 기능 검증

- [ ] 배치 수동 실행 가능
- [ ] 배치 수동 중단 가능
- [ ] 재처리 실행 및 기존 결과 보존 확인
- [ ] 감사 로그 생성 확인
- [ ] 알림 발송 확인

### 5.2 데이터 검증

- [ ] 오류 코드 마스터 데이터 확인
- [ ] 배치 작업 마스터 데이터 확인
- [ ] 테스트 데이터 정리 완료

### 5.3 운영 준비

- [ ] 운영자 계정 생성
- [ ] 알림 수신자 설정
- [ ] Runbook 문서 작성
- [ ] 긴급 연락처 정리

---

## 6. Definition of Done (최종 검증)

상세 설계서 Section 11 기준:

| # | 기준 | 상태 | 검증 방법 |
|---|------|------|-----------|
| DoD-1 | 모든 배치 실행 상태가 DB로 추적 가능 | ⬜ | batch_execution 테이블 조회 |
| DoD-2 | 재처리 실행 시 기존 결과 보존 | ⬜ | result_version 이력 확인 |
| DoD-3 | 운영자가 수동으로 중단·재개 가능 | ⬜ | API 테스트 |
| DoD-4 | 장애 발생 시 원인 추적 가능 | ⬜ | batch_execution_log 조회 |
| DoD-5 | 감사 로그 누락 없음 | ⬜ | ops_audit_log 완전성 검증 |

---

## 7. 롤백 계획

### 7.1 DDL 롤백

```sql
-- 역순으로 테이블 삭제
DROP TABLE IF EXISTS error_code_master CASCADE;
DROP TABLE IF EXISTS ops_alert CASCADE;
DROP TABLE IF EXISTS result_version CASCADE;
DROP TABLE IF EXISTS ops_audit_log CASCADE;
DROP TABLE IF EXISTS batch_execution_log CASCADE;
DROP TABLE IF EXISTS batch_execution CASCADE;
DROP TABLE IF EXISTS batch_job CASCADE;
```

### 7.2 기능 롤백

- 관리자 API 엔드포인트 비활성화
- 기존 배치 스케줄러로 복원
- 알림 서비스 비활성화

---

*이 체크리스트는 Epic C-1 구현 전/중/후 필수 검증 항목입니다.*
*모든 항목이 충족되어야 Phase 3-C 완료로 인정됩니다.*

---

**문서 끝**

# KingoPortfolio 프로젝트 진행 보고서
최초작성일자: 2026-01-03
최종수정일자: 2026-01-18

## 📋 프로젝트 개요

**프로젝트명**: KingoPortfolio - AI 기반 맞춤형 투자 포트폴리오 추천 시스템
**개발 기간**: 2025년 12월 ~ 현재 진행 중
**기술 스택**:
- Frontend: React 18, Vite, React Router
- Backend: FastAPI (Python), SQLite
- 인증: JWT Token 기반
- API Rate Limiting: SlowAPI

---

## 🎯 프로젝트 목표

개인 투자자의 투자 성향을 분석하고, 맞춤형 포트폴리오를 추천하는 웹 기반 핀테크 서비스 개발

---

## ✅ 구현 완료 기능

### 1. 사용자 인증 및 관리 시스템

#### 1.1 회원가입 및 로그인
- 이메일 기반 회원가입
- 비밀번호 암호화 (bcrypt)
- JWT 토큰 기반 인증 (Access Token 30분, Refresh Token 7일)
- 자동 로그인 유지 기능

#### 1.2 사용자 등급 시스템 (4단계)
| 등급 | 일일 진단 제한 | 포트폴리오 저장 | 월 구독료 |
|------|---------------|----------------|----------|
| Free | 3회 | 1개 | 무료 |
| Basic | 10회 | 5개 | $9.99 |
| Premium | 50회 | 20개 | $29.99 |
| Enterprise | 무제한 | 무제한 | $99.99 |

#### 1.3 이메일 인증 시스템
- 회원가입 시 인증 메일 자동 발송
- 이메일 미인증 사용자 기능 제한
- 인증 토큰 24시간 유효
- 인증 메일 재발송 기능

#### 1.4 비밀번호 관리
- 비밀번호 변경 기능
- 비밀번호 재설정 (이메일 기반)
- 재설정 토큰 1시간 유효

#### 1.5 관리자 기능
- 사용자 역할 관리 (일반/관리자)
- 사용자 등급 변경
- 관리자 전용 메뉴 (Admin 역할만 접근 가능)

### 2. 투자 성향 진단 시스템

#### 2.1 진단 설문 (10개 문항)
- 투자 목적 및 기간
- 리스크 허용도
- 투자 경험 및 지식 수준
- 재무 상태 및 수입 안정성
- 투자 선호도

#### 2.2 성향 분석 알고리즘
- **안정형 (Conservative)**: 원금 보존 중시, 낮은 리스크
- **중립형 (Moderate)**: 안정성과 수익성의 균형
- **공격형 (Aggressive)**: 높은 수익 추구, 리스크 감수

#### 2.3 진단 이력 관리
- 과거 진단 결과 저장 및 조회
- 진단별 포트폴리오 추천 이력
- 진단 결과 상세 정보 (점수, 성향, 추천 근거)

### 3. 포트폴리오 추천 엔진

#### 3.1 자산 배분 전략
투자 성향별 최적 자산 배분 비율:

**안정형 (Conservative)**
- 주식: 20% (최소 10%, 최대 30%)
- ETF: 15% (최소 10%, 최대 20%)
- 채권: 35% (최소 30%, 최대 45%)
- 예적금: 30% (최소 25%, 최대 35%)

**중립형 (Moderate)**
- 주식: 40% (최소 30%, 최대 50%)
- ETF: 20% (최소 15%, 최대 25%)
- 채권: 25% (최소 20%, 최대 30%)
- 예적금: 15% (최소 10%, 최대 20%)

**공격형 (Aggressive)**
- 주식: 60% (최소 50%, 최대 70%)
- ETF: 20% (최소 15%, 최대 25%)
- 채권: 15% (최소 10%, 최대 20%)
- 예적금: 5% (최소 0%, 최대 10%)

#### 3.2 종목 선정 알고리즘

**주식 선정 기준 (점수 기반 0-100점)**
- 성과 점수 (40점): 1년 수익률, YTD 수익률
- 밸류에이션 점수 (30점): PER, PBR
- 배당 점수 (20점): 배당 수익률 (안정형에게 가중치 높음)
- 리스크 조정 (10점): 투자 성향별 리스크 레벨 매칭

**ETF 선정 기준**
- 성과: 1년 수익률
- 운용 규모 (AUM): 1조 이상 선호
- 비용: 낮은 운용 보수율 선호
- 리스크 레벨: 투자 성향에 맞는 상품 선정

**채권 선정 기준**
- 금리가 높은 순서
- 신용 등급 고려
- 투자 성향에 맞는 만기 선택

**예금 상품 선정 기준**
- 최고 금리 상품 우선
- 원금 보장 및 유동성 확보

#### 3.3 포트폴리오 통계
- 기대 연간 수익률 계산
- 포트폴리오 리스크 레벨 평가
- 자산별 비중 및 금액 계산
- 종목별 추천 근거 제공

#### 3.4 중복 제거 로직
- 같은 이름의 주식/ETF 중 점수가 높은 것만 선택
- 가격 정보가 없는 증권 자동 제외
- 거래 불가능한 상품 필터링

### 4. 시장 데이터 대시보드

#### 4.1 실시간 시장 지수
- 코스피 지수
- 코스닥 지수
- S&P 500 지수
- 다우존스 지수
- 나스닥 지수

#### 4.2 인기 종목 TOP 10
- 거래량 기준 상위 종목
- 실시간 가격 정보
- 등락률 표시

#### 4.3 섹터별 성과
- IT, 금융, 바이오, 에너지, 소비재 등
- 섹터별 평균 수익률
- 색상 코딩으로 직관적 표시

### 5. 보안 및 성능 최적화

#### 5.1 API Rate Limiting
- 회원가입: 시간당 5회
- 로그인: 분당 10회
- 진단 제출: 시간당 10회
- 포트폴리오 생성: 시간당 100회
- 관리자 조회: 시간당 500회

#### 5.2 CORS 설정
- 로컬 개발 환경: localhost:3000, localhost:5173
- 프로덕션 환경: Vercel 배포 도메인

#### 5.3 토큰 보안
- Access Token: 30분 유효
- Refresh Token: 7일 유효
- 자동 갱신 메커니즘
- 만료 시 자동 재로그인 유도

### 6. 사용자 인터페이스

#### 6.1 반응형 디자인
- 모바일, 태블릿, 데스크톱 최적화
- 그리드 시스템 기반 레이아웃
- 터치 친화적 인터페이스

#### 6.2 시각적 요소
- 자산 배분 차트 (비율 바)
- 투자 성향별 색상 코딩
- 카드 기반 정보 표시
- 로딩 스피너 및 에러 메시지

#### 6.3 네비게이션
- 헤더 메뉴: 대시보드, 진단하기, 진단이력, 포트폴리오, 프로필
- 관리자 전용 메뉴
- 로그인/로그아웃 버튼

#### 6.4 투자 가이드
- 분산 투자의 중요성
- 정기적인 리밸런싱 안내
- 장기 투자 권장
- 투자 성향별 맞춤 팁

---

## 📊 데이터베이스 구조

### 주요 테이블

1. **users**: 사용자 정보
   - 이메일, 비밀번호 (암호화)
   - 역할 (user/admin)
   - 등급 (free/basic/premium/enterprise)
   - 이메일 인증 여부

2. **diagnoses**: 투자 성향 진단 결과
   - 사용자 ID (외래키)
   - 진단 점수
   - 투자 성향 (conservative/moderate/aggressive)
   - 설문 응답 (JSON)

3. **stocks**: 주식 정보
   - 종목명, 티커
   - 현재가, 섹터
   - PER, PBR, 배당 수익률
   - 1년 수익률, YTD 수익률
   - 리스크 레벨

4. **etfs**: ETF 정보
   - ETF명, 티커
   - 현재가, ETF 유형
   - 1년 수익률, 운용 보수율
   - AUM (운용 자산 규모)

5. **bonds**: 채권 정보
   - 채권명, 발행자
   - 금리, 만기
   - 신용 등급

6. **deposit_products**: 예금 상품
   - 은행명, 상품명
   - 금리, 가입 기간

---

## 🚀 주요 기술적 성과

### 1. 확장 가능한 아키텍처
- 모듈화된 코드 구조
- 재사용 가능한 컴포넌트
- RESTful API 설계

### 2. 성능 최적화
- React의 useCallback, useMemo 활용
- API 응답 캐싱
- 지연 로딩 (Lazy Loading)

### 3. 사용자 경험 개선
- 직관적인 UI/UX
- 실시간 피드백
- 명확한 에러 메시지
- 로딩 상태 표시

### 4. 보안 강화
- JWT 토큰 기반 인증
- 비밀번호 암호화
- Rate Limiting으로 DDoS 방지
- CORS 설정으로 출처 제한

---

## 📈 향후 개발 계획

### Phase 1: 핵심 기능 고도화
- [ ] 포트폴리오 백테스팅 기능
- [ ] 투자 성과 추적 (가상 투자)
- [ ] 리밸런싱 알림 기능
- [ ] 맞춤형 투자 리포트 생성

### Phase 2: 데이터 확장
- [ ] 실시간 시장 데이터 연동 (API)
- [ ] 해외 주식/ETF 추가
- [ ] 암호화폐 포트폴리오 지원
- [ ] 부동산 투자 상품 추가

### Phase 3: AI/ML 기능
- [ ] 시장 예측 모델 개발
- [ ] 개인화 추천 알고리즘 강화
- [ ] 뉴스 감성 분석
- [ ] 리스크 시뮬레이션

### Phase 4: 소셜 기능
- [ ] 투자 커뮤니티 (포럼)
- [ ] 전문가 칼럼 및 인사이트
- [ ] 포트폴리오 공유 기능
- [ ] 투자 챌린지 및 게임화

### Phase 5: 결제 및 구독
- [ ] 등급별 구독 결제 시스템
- [ ] 무료 체험 기간 제공
- [ ] 결제 히스토리 관리
- [ ] 환불 정책 구현

### Phase 6: 모바일 앱
- [ ] React Native 기반 iOS/Android 앱
- [ ] 푸시 알림 (포트폴리오 변동)
- [ ] 오프라인 모드 지원

---

## 🐛 알려진 이슈 및 해결 사항

### 해결 완료
1. ✅ **Rate Limiting 오류**: 포트폴리오 생성 시 429 에러
   - 원인: 진단 제출 Rate Limit (10/hour) 적용
   - 해결: 포트폴리오 전용 Rate Limit (100/hour) 추가

2. ✅ **자산 배분 비율 0% 표시**
   - 원인: 프론트엔드에서 `data.percentage` 읽었으나 백엔드는 `data.ratio` 반환
   - 해결: 필드명 일치시킴

3. ✅ **추천 종목 투자 금액 NaN 표시**
   - 원인: 프론트엔드에서 `amount`, `quantity` 필드 읽었으나 백엔드는 `invested_amount`, `shares` 반환
   - 해결: 필드명 일치시킨 후 정상 작동

4. ✅ **Tiger 200 ETF 중복 표시**
   - 원인: 같은 이름의 ETF가 DB에 중복 존재 (다른 ticker)
   - 해결: 점수 기준으로 중복 제거 로직 추가

5. ✅ **일부 ETF 투자 금액 0원**
   - 원인: `current_price`가 NULL인 증권 선택됨
   - 해결: 가격 정보 있는 증권만 선택하도록 필터 추가

### 진행 중
- 실시간 시장 데이터 API 연동 테스트
- 대용량 트래픽 처리 최적화

---

## 💰 비용 분석 (월간 예상)

### 개발 단계 (현재)
- 호스팅: $0 (로컬 개발)
- 데이터베이스: $0 (SQLite)
- 이메일 서비스: $0 (SMTP 테스트)
- **총계: $0/월**

### 프로덕션 배포 시 (예상)
- 프론트엔드 호스팅 (Vercel): $0 (Hobby Plan)
- 백엔드 호스팅 (Render/Railway): $5-20/월
- 데이터베이스 (PostgreSQL): $5-15/월
- 이메일 서비스 (SendGrid): $0-15/월 (2,000통까지 무료)
- 실시간 시장 데이터 API: $50-200/월
- **총계: $60-250/월**

### 수익 모델 (예상)
**구독 수익 (100명 가정)**
- Free: 60명 × $0 = $0
- Basic: 25명 × $9.99 = $249.75
- Premium: 12명 × $29.99 = $359.88
- Enterprise: 3명 × $99.99 = $299.97
- **월 총 수익: $909.60**

**손익분기점**: 약 30명의 유료 구독자 필요

---

## 📝 개발 히스토리

### v1.0.0 - 핵심 기능 구현 (현재)
- 사용자 인증 시스템
- 투자 성향 진단
- 포트폴리오 추천 엔진
- 시장 데이터 대시보드
- 사용자 등급 시스템
- 이메일 인증

### v0.9.0 - 베타 테스트
- 주요 버그 수정
- UI/UX 개선
- 성능 최적화

### v0.5.0 - 알파 버전
- 기본 인증 및 진단 기능
- 간단한 포트폴리오 추천

---

## 👥 팀 구성

- **개발자**: 1명 (Full-stack)
- **디자이너**: 0명 (부트스트랩 CSS 활용)
- **PM**: 0명 (개발자 겸임)

---

## 🎓 기술적 도전 과제 및 학습

### 도전 과제
1. **포트폴리오 최적화 알고리즘 설계**
   - 다양한 투자 성향을 반영한 자산 배분 전략 수립
   - 점수 기반 종목 선정 로직 구현

2. **JWT 토큰 관리**
   - Access/Refresh Token 메커니즘
   - 자동 갱신 및 만료 처리

3. **Rate Limiting 구현**
   - API 남용 방지
   - 사용자별/엔드포인트별 차등 제한

### 학습 성과
- FastAPI의 Dependency Injection 활용
- React Hooks (useContext, useEffect, useState)
- JWT 기반 인증 구현
- SQLAlchemy ORM 활용
- RESTful API 설계 원칙

---

## 📞 문의 및 지원

**프로젝트 GitHub**: (향후 공개 예정)
**문의 이메일**: support@kingoportfolio.com (예정)
**버그 리포트**: GitHub Issues 활용 예정

---

## 📄 라이선스

MIT License (예정)

---

**마지막 업데이트**: 2026년 1월 3일
**문서 버전**: 1.0.0

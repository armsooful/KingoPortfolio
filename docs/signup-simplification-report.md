# 회원가입 간소화 보고서

> 작성일: 2026-02-13
> 목적: 현재 3단계 회원가입을 이메일+비밀번호 즉시 가입으로 간소화하고, 추가 정보는 서비스 이용 시점에 수집하는 방안 설계

---

## 1. 현재 가입 절차 분석

### 1-1. 현재 흐름 (3단계, 입력 필드 14개)

```
[Step 1: 기본 정보]     [Step 2: 상세 정보]         [Step 3: 투자 성향]
────────────────────   ────────────────────────    ────────────────────
이름 *                  전화번호                     투자 경험 (select)
이메일 *                생년월일                     투자 목표
비밀번호 *              직업                         위험 감수 성향 (select)
비밀번호 확인 *          회사명
                       연봉 (만원)
                       총 자산 (만원)
                       거주 도시
                       구/군

필수 4개 + 선택 10개 = 총 14개 필드, 3개 화면
```

### 1-2. 문제점

| 문제 | 상세 |
|------|------|
| **이탈률 유발** | 3단계 프로그레스바를 본 사용자가 "너무 많다"고 판단하고 이탈 |
| **불필요한 정보 선수집** | 연봉, 총자산, 거주지 등 민감 정보를 가입 시점에 요구 — 신뢰 미확보 상태에서 불쾌감 유발 |
| **Step 2 전체가 선택사항** | Step 2의 8개 필드가 모두 optional인데 별도 단계로 분리되어 있어 "건너뛸 수 없는" 인상 |
| **Step 3도 미활용** | 가입 시 입력받는 투자 경험/위험 감수 성향은 이후 설문 진단(SurveyPage)에서 다시 묻는 중복 |
| **가입 직후 강제 이동** | 가입 완료 → `/survey`로 강제 이동 → 설문도 동의+14문항 → 추가 이탈 |

### 1-3. 코드 구조

| 계층 | 파일 | 현황 |
|------|------|------|
| Frontend | `SignupPage.jsx` | 3단계 wizard (step 1~3), 14개 필드 |
| API Schema | `schemas.py:UserCreate` | email, password 필수 + 11개 optional 필드 |
| Backend API | `auth.py:signup()` | `create_user(db, user_create)` → User 모델에 모든 필드 저장 |
| User Model | `models/user.py` | 14개 컬럼 (모두 nullable 지원) |
| Profile Page | `ProfilePage.jsx` | 이미 모든 필드 편집 가능 (프로필 수정 기능 완비) |
| Profile API | `auth.py:update_profile()` | 현재 name, email만 수정 가능 (제한적) |

### 1-4. 추가 정보 사용처 분석

현재 가입 시 수집하는 추가 정보가 실제로 어디서 사용되는지 추적한 결과:

| 필드 | 사용처 | 필수 시점 |
|------|--------|----------|
| `name` | 프로필 표시, 이메일 인사말 | 가입 시 (있으면 좋음) |
| `phone` | **미사용** | 불필요 |
| `birth_date` | 프로필 나이 계산 (표시용) | 불필요 |
| `occupation` | **미사용** | 불필요 |
| `company` | **미사용** | 불필요 |
| `annual_income` | **미사용** (향후 시뮬레이션 활용 가능) | 포트폴리오 생성 시 |
| `total_assets` | **미사용** (향후 시뮬레이션 활용 가능) | 포트폴리오 생성 시 |
| `city` | **미사용** | 불필요 |
| `district` | **미사용** | 불필요 |
| `investment_experience` | 포트폴리오 엔진 참고 (SurveyPage에서 중복 수집) | 설문 진단 시 |
| `investment_goal` | 프로필 표시용 | 설문 진단 시 |
| `risk_tolerance` | 포트폴리오 엔진 (`portfolio_engine.py`) | 포트폴리오 생성 시 |

**결론**: 14개 필드 중 가입 시점에 반드시 필요한 것은 **email + password** 뿐이다. `name`은 있으면 좋지만 필수는 아니다.

---

## 2. 개선안: 2단계 분리 (즉시 가입 + 지연 수집)

### 2-1. 새로운 가입 흐름

```
[가입: 10초]                          [추가 정보: 서비스 이용 시]
──────────────                       ──────────────────────────
이메일 *                              포트폴리오 맞춤 서비스 요청 시
비밀번호 *                              → "맞춤 서비스를 위해 추가 정보가 필요합니다"
비밀번호 확인 *                          → 프로필 완성 모달/페이지 표시
                                        → 투자 경험, 위험 성향, 연봉, 자산 등
[가입 완료 → 대시보드]
```

### 2-2. 기능 접근 정책

| 기능 | 추가 정보 필요 여부 | 접근 조건 |
|------|---------------------|----------|
| 대시보드 (시장 현황) | 불필요 | 가입 즉시 |
| 스크리너 (종목 탐색) | 불필요 | 가입 즉시 |
| 관심 종목 (Watchlist) | 불필요 | 가입 즉시 |
| 종목 상세 (Compass Score) | 불필요 | 가입 즉시 |
| 시장 이메일 구독 | 불필요 | 가입 즉시 |
| 학습 콘텐츠 | 불필요 | 가입 즉시 |
| **설문 진단 (SurveyPage)** | **필요** (투자 경험, 위험 성향) | 설문 시작 시 수집 |
| **포트폴리오 시뮬레이션** | **필요** (위험 성향, 선택적: 연봉/자산) | 시뮬레이션 시작 시 수집 |
| **종합 리포트 생성** | **필요** (투자 경험, 위험 성향) | 리포트 요청 시 수집 |

### 2-3. 추가 정보 수집 트리거

사용자가 맞춤 서비스를 요청하면, **프로필 미완성 시** 부드럽게 추가 정보를 요청한다.

```
사용자 클릭: "학습 성향 진단 시작"
    │
    ├─ 프로필 완성됨? (investment_experience + risk_tolerance 존재)
    │   ├─ YES → 바로 설문 페이지 이동
    │   └─ NO  → 프로필 완성 모달 표시
    │           ┌────────────────────────────────────────┐
    │           │  맞춤 진단을 위해 몇 가지 정보가       │
    │           │  필요합니다 (30초 소요)                 │
    │           │                                        │
    │           │  투자 경험:  [초보 ▾]                   │
    │           │  위험 감수 성향: [중립적 ▾]              │
    │           │  연봉 (선택): [         ] 만원          │
    │           │  총 자산 (선택): [         ] 만원        │
    │           │                                        │
    │           │  [나중에]           [저장하고 계속]      │
    │           └────────────────────────────────────────┘
    │
    └─ "나중에" 클릭 시 → 기본값(초보, 중립적)으로 진행
```

---

## 3. 구현 상세 설계

### 3-1. Frontend 변경

#### A. `SignupPage.jsx` — 단일 화면으로 축소

```
변경 전: 3단계 wizard (step 1~3, 14개 필드)
변경 후: 단일 화면 (3개 필드)

┌──────────────────────────┐
│       회원가입             │
│                          │
│  이메일 *                 │
│  [                     ] │
│                          │
│  비밀번호 *               │
│  [                     ] │
│  8자 이상                 │
│                          │
│  비밀번호 확인 *           │
│  [                     ] │
│                          │
│  [      회원가입      ]   │
│                          │
│  이미 계정이 있으신가요?    │
│  로그인                   │
│                          │
│  * 추가 정보는 맞춤 서비스  │
│    이용 시 안내드립니다     │
└──────────────────────────┘
```

제거 항목:
- 프로그레스바 (1→2→3 단계 표시) 제거
- Step 2 전체 (전화번호, 생년월일, 직업, 회사명, 연봉, 총자산, 거주 도시, 구/군) 제거
- Step 3 전체 (투자 경험, 투자 목표, 위험 감수 성향) 제거
- `name` 필드도 가입 화면에서 제거 (프로필에서 설정 가능)

#### B. 새 컴포넌트: `ProfileCompletionModal.jsx`

맞춤 서비스 접근 시 프로필이 미완성이면 표시되는 모달.

필드 구성 (컨텍스트에 따라 다름):
- **설문 진단 접근 시**: 투자 경험 + 위험 감수 성향 (필수 2개)
- **포트폴리오 시뮬레이션 접근 시**: 위험 감수 성향 + 연봉/총자산 (선택)
- 모달 하단: "나중에" 버튼 (기본값으로 진행) + "저장하고 계속" 버튼

#### C. 가입 후 리다이렉트 변경

```
변경 전: 가입 완료 → /survey (설문 강제 이동)
변경 후: 가입 완료 → /dashboard (대시보드)
```

대시보드에서 자연스럽게 "학습 성향 진단하기" CTA를 통해 진단 유도.

### 3-2. Backend 변경

#### A. `schemas.py:UserCreate` — 최소 필드로 축소

```python
# 변경 전: email + password + 11개 optional
# 변경 후: email + password만

class UserCreate(BaseModel):
    email: EmailStr
    password: str = Field(..., min_length=8, max_length=72)
```

#### B. `auth.py:update_profile()` — 전체 필드 수정 지원

현재 `update_profile()`은 name, email만 수정 가능하다. 모든 프로필 필드를 수정할 수 있도록 확장해야 한다.

```python
# 변경 후: 모든 프로필 필드 수정 가능
class UpdateProfileRequest(BaseModel):
    name: Optional[str] = None
    phone: Optional[str] = None
    birth_date: Optional[date] = None
    occupation: Optional[str] = None
    company: Optional[str] = None
    annual_income: Optional[int] = None
    total_assets: Optional[int] = None
    city: Optional[str] = None
    district: Optional[str] = None
    investment_experience: Optional[str] = None
    investment_goal: Optional[str] = None
    risk_tolerance: Optional[str] = None
```

#### C. 새 API: `GET /auth/profile/completion-status`

프론트엔드가 프로필 완성 여부를 빠르게 판단할 수 있는 경량 엔드포인트.

```json
// Response
{
  "is_complete": false,
  "missing_fields": ["investment_experience", "risk_tolerance"],
  "completion_percent": 25
}
```

### 3-3. User Model — 변경 없음

`models/user.py`의 컬럼은 모두 nullable이므로 모델 변경 불필요. 가입 시 email + hashed_password만 저장하고 나머지는 NULL로 유지.

### 3-4. `ProfilePage.jsx` — 변경 최소

프로필 페이지는 이미 전 필드 편집 기능이 구현되어 있다. 단, 현재 `update_profile()` API가 name/email만 지원하므로 API 확장 후 그대로 동작한다.

추가 고려: 프로필 완성률 표시 바를 상단에 추가.

```
┌──────────────────────────────────────┐
│  프로필 완성률 25%  ████░░░░░░░░░░░  │
│  맞춤 서비스를 위해 추가 정보를       │
│  입력해주세요                        │
└──────────────────────────────────────┘
```

---

## 4. 데이터 흐름 비교

### 4-1. 현재 (Before)

```
가입 페이지 (14필드, 3단계)
    │
    ▼
POST /auth/signup (email + password + 11개 optional)
    │
    ▼
User 모델에 모든 필드 한번에 저장
    │
    ▼
/survey 강제 이동 (추가 14문항)
    │
    ▼
서비스 이용 가능
```

**사용자 체감**: 가입에만 14필드 + 설문 14문항 = 28개 항목을 거쳐야 서비스 이용 가능

### 4-2. 개선 후 (After)

```
가입 페이지 (3필드, 단일 화면)
    │
    ▼
POST /auth/signup (email + password만)
    │
    ▼
/dashboard 이동 → 즉시 서비스 이용
    │
    ├─ 스크리너, 대시보드, 관심종목 등 → 추가 정보 불필요
    │
    └─ 설문 진단 / 포트폴리오 시뮬레이션 요청 시
        │
        ▼
    ProfileCompletionModal (필요한 2~4개 필드만)
        │
        ▼
    PUT /auth/profile (부분 업데이트)
        │
        ▼
    맞춤 서비스 진행
```

**사용자 체감**: 가입 3필드 → 즉시 서비스 → 필요 시 2~4필드 추가

---

## 5. 마이그레이션 고려사항

### 5-1. 기존 사용자 영향

- 기존 사용자 데이터는 그대로 유지 (DB 스키마 변경 없음)
- 이미 추가 정보를 입력한 사용자는 영향 없음
- 추가 정보가 없는 기존 사용자도 맞춤 서비스 접근 시 모달로 자연스럽게 수집

### 5-2. 하위 호환성

- `UserCreate` 스키마에서 optional 필드를 제거하면 기존 클라이언트에서 추가 필드를 보내도 Pydantic이 무시 (breaking change 아님)
- `signup()` API 응답 형태는 동일하게 유지

### 5-3. 설문 진단(SurveyPage)과의 관계

현재 SurveyPage 설문 문항에 투자 경험, 위험 성향 관련 질문이 포함되어 있다. 이는 가입 시 수집하는 정보와 **중복**이다.

방안:
- 가입 시 수집을 제거하고, SurveyPage에서만 수집 → 이후 프로필에 반영
- 또는 ProfileCompletionModal에서 간단히 수집 후 SurveyPage에서는 더 세분화된 질문만

---

## 6. 구현 파일 목록

| 작업 | 파일 | 변경 유형 |
|------|------|----------|
| 가입 페이지 간소화 | `frontend/src/pages/SignupPage.jsx` | 대폭 수정 (3단계→단일) |
| 가입 CSS 정리 | `frontend/src/styles/SignupPage.css` | 수정 (프로그레스바 등 제거) |
| 프로필 완성 모달 | `frontend/src/components/ProfileCompletionModal.jsx` | **신규** |
| 프로필 완성 모달 CSS | `frontend/src/styles/ProfileCompletionModal.css` | **신규** |
| 가입 후 리다이렉트 | `frontend/src/pages/SignupPage.jsx` | 수정 (`/survey` → `/dashboard`) |
| API 스키마 축소 | `backend/app/schemas.py` | 수정 (UserCreate 필드 축소) |
| 프로필 수정 API 확장 | `backend/app/routes/auth.py` | 수정 (update_profile 전필드 지원) |
| 프로필 완성 상태 API | `backend/app/routes/auth.py` | **추가** (GET /profile/completion-status) |
| 프로필 완성률 표시 | `frontend/src/pages/ProfilePage.jsx` | 수정 (상단 완성률 바) |
| 맞춤 서비스 가드 | 해당 페이지들 (SurveyPage 등) | 수정 (완성 여부 체크 + 모달 트리거) |

**예상 변경 파일**: 기존 5개 수정 + 신규 2개 = **총 7개 파일**

---

## 7. 기대 효과

| 지표 | Before | After | 개선 |
|------|--------|-------|------|
| 가입 화면 수 | 3개 | 1개 | -67% |
| 가입 필드 수 | 14개 (필수 4 + 선택 10) | 3개 (필수 3) | -79% |
| 가입 소요 시간 (추정) | 2~3분 | 15~30초 | -80% |
| 서비스 진입까지 단계 | 가입 3단계 + 설문 동의 + 설문 14문항 | 가입 1단계 | -90% |
| 민감 정보 노출 시점 | 가입 시 (신뢰 미형성) | 서비스 이용 후 (신뢰 형성) | 적절 |

### 업계 벤치마크

| 서비스 | 가입 필드 | 추가 정보 수집 시점 |
|--------|----------|-------------------|
| **Robinhood** | 이메일 + 비밀번호 | 첫 매매 시 KYC |
| **AlphaSquare** | 이메일 + 비밀번호 (소셜 로그인) | 프리미엄 기능 사용 시 |
| **토스증권** | 전화번호 (본인 인증) | 계좌 개설 시 |
| **Foresto (현재)** | 이메일 + 비밀번호 + 이름 + 10개 선택 | 가입 시 한번에 |
| **Foresto (개선)** | 이메일 + 비밀번호 | 맞춤 서비스 요청 시 |

---

## 8. 요약

> **핵심 원칙**: "가입은 즉시, 정보는 필요할 때"

1. **가입 페이지**: 이메일 + 비밀번호 + 비밀번호 확인 (3필드, 단일 화면)
2. **가입 후**: `/dashboard`로 이동 → 스크리너, 관심종목 등 즉시 이용 가능
3. **추가 정보 수집**: 맞춤 서비스(설문 진단, 포트폴리오 시뮬레이션) 요청 시 `ProfileCompletionModal`로 필요한 필드만 수집
4. **프로필 페이지**: 기존 편집 기능 유지 + 완성률 표시 바 추가
5. **DB 변경 없음**: User 모델은 그대로, nullable 필드가 NULL로 저장될 뿐

# Claude API ì—°ë™ í…ŒìŠ¤íŠ¸ ê°€ì´ë“œ
ìµœì´ˆì‘ì„±ì¼ì: 2025-12-19
ìµœì¢…ìˆ˜ì •ì¼ì: 2026-01-18

## ì‚¬ì „ ì¤€ë¹„

### 1. Anthropic API í‚¤ ë°œê¸‰

1. [Anthropic Console](https://console.anthropic.com/) ì ‘ì†
2. ê³„ì • ìƒì„± ë˜ëŠ” ë¡œê·¸ì¸
3. **API Keys** ë©”ë‰´ í´ë¦­
4. **Create Key** ë²„íŠ¼ í´ë¦­
5. ìƒì„±ëœ API í‚¤ ë³µì‚¬ (ì˜ˆ: `sk-ant-...`)

âš ï¸ **ì£¼ì˜**: API í‚¤ëŠ” í•œ ë²ˆë§Œ í‘œì‹œë˜ë¯€ë¡œ ì•ˆì „í•œ ê³³ì— ì €ì¥í•˜ì„¸ìš”!

---

## í…ŒìŠ¤íŠ¸ ë‹¨ê³„

### Step 1: í™˜ê²½ ë³€ìˆ˜ ì„¤ì •

#### ë°©ë²• 1: .env íŒŒì¼ ì‚¬ìš© (ê¶Œì¥)

```bash
cd backend
cat > .env << EOF
ANTHROPIC_API_KEY=your-actual-api-key-here
SECRET_KEY=your-secret-key-change-in-production-min-32-chars
DATABASE_URL=sqlite:///./kingo.db
EOF
```

#### ë°©ë²• 2: í™˜ê²½ë³€ìˆ˜ë¡œ ì§ì ‘ ì„¤ì •

```bash
export ANTHROPIC_API_KEY="your-actual-api-key-here"
```

**í™•ì¸**:
```bash
# .env íŒŒì¼ í™•ì¸
cat backend/.env

# ë˜ëŠ” í™˜ê²½ë³€ìˆ˜ í™•ì¸
echo $ANTHROPIC_API_KEY
```

---

### Step 2: ë°±ì—”ë“œ ì˜ì¡´ì„± ì„¤ì¹˜

```bash
cd backend
pip install -r requirements.txt
```

**ì˜ˆìƒ ì¶œë ¥**:
```
Successfully installed anthropic-0.40.0 ...
```

---

### Step 3: ë°±ì—”ë“œ ì„œë²„ ì‹œì‘

```bash
cd backend
uvicorn app.main:app --reload --host 127.0.0.1 --port 8000
```

**ì„±ê³µ ì‹œ ì¶œë ¥**:
```
âœ… CORS Allowed Origins: [...]
âœ… Database URL: sqlite:///./kingo.db...
âœ… App Name: KingoPortfolio
âœ… App Version: 1.0.0
INFO:     Uvicorn running on http://127.0.0.1:8000
INFO:     Application startup complete.
```

**ë¸Œë¼ìš°ì €ì—ì„œ í™•ì¸**:
- http://127.0.0.1:8000/docs (Swagger UI)
- http://127.0.0.1:8000/health (í—¬ìŠ¤ì²´í¬)

---

### Step 4: í”„ë¡ íŠ¸ì—”ë“œ ì„œë²„ ì‹œì‘

**ìƒˆ í„°ë¯¸ë„ ì°½**ì—ì„œ:

```bash
cd frontend
npm install  # ì²˜ìŒ í•œ ë²ˆë§Œ
npm run dev
```

**ì„±ê³µ ì‹œ ì¶œë ¥**:
```
  VITE v5.x.x  ready in xxx ms

  âœ  Local:   http://localhost:5173/
  âœ  Network: use --host to expose
```

ë¸Œë¼ìš°ì €ê°€ ìë™ìœ¼ë¡œ ì—´ë¦¬ê±°ë‚˜ http://localhost:5173 ì ‘ì†

---

### Step 5: ì „ì²´ í”Œë¡œìš° í…ŒìŠ¤íŠ¸

#### 5.1 íšŒì›ê°€ì…

1. http://localhost:5173 ì ‘ì†
2. **íšŒì›ê°€ì…** í´ë¦­
3. ì •ë³´ ì…ë ¥:
   ```
   ì´ë©”ì¼: test@example.com
   ë¹„ë°€ë²ˆí˜¸: test1234
   ì´ë¦„: í…ŒìŠ¤í„°
   ```
4. **íšŒì›ê°€ì…** ë²„íŠ¼ í´ë¦­

#### 5.2 ë¡œê·¸ì¸

1. ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ìë™ ì´ë™ (ë˜ëŠ” **ë¡œê·¸ì¸** í´ë¦­)
2. ì •ë³´ ì…ë ¥:
   ```
   ì´ë©”ì¼: test@example.com
   ë¹„ë°€ë²ˆí˜¸: test1234
   ```
3. **ë¡œê·¸ì¸** ë²„íŠ¼ í´ë¦­

#### 5.3 íˆ¬ìì„±í–¥ ì§„ë‹¨ ì„¤ë¬¸

1. **ì„¤ë¬¸ ì‹œì‘** ë²„íŠ¼ í´ë¦­
2. 15ê°œ ë¬¸í•­ì— ë‹µë³€ (1-5ì  ì„ íƒ)
   - ì˜ˆì‹œ: ëª¨ë‘ 3ì ìœ¼ë¡œ ì„ íƒ â†’ ì¤‘ë„í˜• ì˜ˆìƒ
3. ì›” íˆ¬ì ê°€ëŠ¥ì•¡ ì…ë ¥: `100` (100ë§Œì›)
4. **ì œì¶œ** ë²„íŠ¼ í´ë¦­

â³ **ë¡œë”© ì‹œê°„**: Claude AI ë¶„ì„ìœ¼ë¡œ ì¸í•´ 5-10ì´ˆ ì†Œìš”

#### 5.4 ê²°ê³¼ í™•ì¸ âœ¨

**ê¸°ë³¸ ì§„ë‹¨ ê²°ê³¼**:
- ğŸ¯ íˆ¬ìì„±í–¥: ë³´ìˆ˜í˜•/ì¤‘ë„í˜•/ì ê·¹í˜•
- ğŸ“Š ì§„ë‹¨ ì ìˆ˜: X.XX / 10
- ğŸ’¯ ì‹ ë¢°ë„: XX%
- ğŸ“ íŠ¹ì§• ë¦¬ìŠ¤íŠ¸
- ğŸ’¼ ì¶”ì²œ í¬íŠ¸í´ë¦¬ì˜¤ êµ¬ì„±
- ğŸ“ˆ ê¸°ëŒ€ ì—° ìˆ˜ìµë¥ 

**ğŸ¤– AI ë¶„ì„ ì„¹ì…˜** (ë³´ë¼ìƒ‰ ê·¸ë¼ë°ì´ì…˜ ë°•ìŠ¤):
1. **ê°œì¸í™”ëœ íˆ¬ìì„±í–¥ ë¶„ì„**
   - ì‚¬ìš©ìì˜ ë‹µë³€ íŒ¨í„´ ê¸°ë°˜ ë¶„ì„
   - ê°•ì ê³¼ ì£¼ì˜í•  ì 

2. **íˆ¬ì ì¡°ì–¸**
   - êµ¬ì²´ì ì¸ íˆ¬ì ì „ëµ
   - ì¶”ì²œ ìì‚° ë°°ë¶„
   - ë‹¨ê³„ë³„ ì‹¤í–‰ ê°€ì´ë“œ

3. **âš ï¸ ìœ„í—˜ ì£¼ì˜ì‚¬í•­**
   - íˆ¬ì ë¦¬ìŠ¤í¬
   - í”¼í•´ì•¼ í•  í–‰ë™
   - ìœ„í—˜ ê´€ë¦¬ ë°©ë²•

---

## í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ë³„ ê²°ê³¼ í™•ì¸

### ì‹œë‚˜ë¦¬ì˜¤ 1: ë³´ìˆ˜í˜• íˆ¬ìì (1-3ì  ìœ„ì£¼)

**ì„¤ë¬¸ ë‹µë³€**: ëŒ€ë¶€ë¶„ 1-2ì  ì„ íƒ

**ì˜ˆìƒ ê²°ê³¼**:
- íˆ¬ìì„±í–¥: ë³´ìˆ˜í˜• (conservative)
- ì ìˆ˜: 0-3.33
- AI ë¶„ì„ ë‚´ìš©:
  - "ì•ˆì •ì„±ì„ ìµœìš°ì„ ìœ¼ë¡œ..."
  - "ì±„ê¶Œ, ì˜ˆì ê¸ˆ ìœ„ì£¼ ì¶”ì²œ..."
  - "ì¸í”Œë ˆì´ì…˜ ì£¼ì˜..."

### ì‹œë‚˜ë¦¬ì˜¤ 2: ì¤‘ë„í˜• íˆ¬ìì (3ì  ìœ„ì£¼)

**ì„¤ë¬¸ ë‹µë³€**: ëŒ€ë¶€ë¶„ 3ì  ì„ íƒ

**ì˜ˆìƒ ê²°ê³¼**:
- íˆ¬ìì„±í–¥: ì¤‘ë„í˜• (moderate)
- ì ìˆ˜: 3.34-6.66
- AI ë¶„ì„ ë‚´ìš©:
  - "ì•ˆì •ì„±ê³¼ ìˆ˜ìµì„±ì˜ ê· í˜•..."
  - "ì£¼ì‹ 40%, ì±„ê¶Œ 30% ì¶”ì²œ..."
  - "ì¤‘ì¥ê¸° ê´€ì  ìœ ì§€..."

### ì‹œë‚˜ë¦¬ì˜¤ 3: ì ê·¹í˜• íˆ¬ìì (4-5ì  ìœ„ì£¼)

**ì„¤ë¬¸ ë‹µë³€**: ëŒ€ë¶€ë¶„ 4-5ì  ì„ íƒ

**ì˜ˆìƒ ê²°ê³¼**:
- íˆ¬ìì„±í–¥: ì ê·¹í˜• (aggressive)
- ì ìˆ˜: 6.67-10
- AI ë¶„ì„ ë‚´ìš©:
  - "ë†’ì€ ìˆ˜ìµ ì¶”êµ¬..."
  - "ì„±ì¥ì£¼, ê¸°ìˆ ì£¼ ë¹„ì¤‘ ë†’ì„..."
  - "ë ˆë²„ë¦¬ì§€ ìƒí’ˆ ì£¼ì˜..."

---

## API í‚¤ ì—†ì´ í…ŒìŠ¤íŠ¸

API í‚¤ë¥¼ ì„¤ì •í•˜ì§€ ì•Šì•„ë„ ê¸°ë³¸ ê¸°ëŠ¥ì€ ì‘ë™í•©ë‹ˆë‹¤:

```bash
# .env íŒŒì¼ì—ì„œ ANTHROPIC_API_KEY ì œê±° ë˜ëŠ” ë¹„ì›Œë‘ê¸°
ANTHROPIC_API_KEY=
```

**ê²°ê³¼**:
- âœ… ê¸°ë³¸ ì§„ë‹¨ ê¸°ëŠ¥: ì •ìƒ ì‘ë™
- âŒ AI ë¶„ì„ ì„¹ì…˜: í‘œì‹œë˜ì§€ ì•ŠìŒ (ë°±ì—”ë“œì—ì„œ `ai_analysis: null` ë°˜í™˜)

**ë°±ì—”ë“œ ë¡œê·¸**:
```
Claude AI ë¶„ì„ ì‹¤íŒ¨ (ë¬´ì‹œë¨): ANTHROPIC_API_KEYê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.
```

---

## ë¬¸ì œ í•´ê²° (Troubleshooting)

### 1. "ANTHROPIC_API_KEYê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤"

**ì›ì¸**: API í‚¤ê°€ í™˜ê²½ë³€ìˆ˜ì— ì—†ìŒ

**í•´ê²°**:
```bash
cd backend
echo "ANTHROPIC_API_KEY=sk-ant-your-key" >> .env
```

### 2. "Claude API í˜¸ì¶œ ì‹¤íŒ¨: API connection error"

**ì›ì¸**: ì¸í„°ë„· ì—°ê²° ë¬¸ì œ ë˜ëŠ” ì˜ëª»ëœ API í‚¤

**í•´ê²°**:
- ì¸í„°ë„· ì—°ê²° í™•ì¸
- API í‚¤ ì¬í™•ì¸ (https://console.anthropic.com/)
- Anthropic API ìƒíƒœ í™•ì¸ (https://status.anthropic.com/)

### 3. AI ë¶„ì„ì´ í‘œì‹œë˜ì§€ ì•ŠìŒ

**í™•ì¸ ì‚¬í•­**:
```bash
# ë°±ì—”ë“œ ë¡œê·¸ í™•ì¸
# í„°ë¯¸ë„ì—ì„œ "Claude AI ë¶„ì„ ì‹¤íŒ¨" ë©”ì‹œì§€ ê²€ìƒ‰

# API ì‘ë‹µ í™•ì¸ (ë¸Œë¼ìš°ì € ê°œë°œì ë„êµ¬)
# Network íƒ­ â†’ diagnosis/submit â†’ Response
# "ai_analysis": null ë˜ëŠ” {...} í™•ì¸
```

### 4. CORS ì—ëŸ¬

**ì›ì¸**: í”„ë¡ íŠ¸ì—”ë“œ-ë°±ì—”ë“œ origin ë¶ˆì¼ì¹˜

**í•´ê²°**:
```bash
# backend/.envì— ì¶”ê°€
ALLOWED_ORIGINS=http://localhost:5173,http://127.0.0.1:5173
```

### 5. í¬íŠ¸ ì¶©ëŒ

**ë°±ì—”ë“œ í¬íŠ¸ ë³€ê²½**:
```bash
uvicorn app.main:app --reload --port 8001
```

**í”„ë¡ íŠ¸ì—”ë“œ í¬íŠ¸ ë³€ê²½**:
```bash
npm run dev -- --port 5174
```

---

## API ì§ì ‘ í…ŒìŠ¤íŠ¸ (cURL)

### 1. íšŒì›ê°€ì…

```bash
curl -X POST "http://127.0.0.1:8000/auth/signup" \
  -H "Content-Type: application/json" \
  -d '{
    "email": "test@example.com",
    "password": "test1234",
    "name": "í…ŒìŠ¤í„°"
  }'
```

### 2. ë¡œê·¸ì¸

```bash
curl -X POST "http://127.0.0.1:8000/token" \
  -H "Content-Type: application/x-www-form-urlencoded" \
  -d "username=test@example.com&password=test1234"
```

**ì‘ë‹µ**ì—ì„œ `access_token` ë³µì‚¬

### 3. ì§„ë‹¨ ì œì¶œ (Claude AI ë¶„ì„ í¬í•¨)

```bash
# TOKEN ë³€ìˆ˜ì— ìœ„ì—ì„œ ë°›ì€ access_token ì„¤ì •
TOKEN="eyJhbGciOiJIUzI1NiIs..."

curl -X POST "http://127.0.0.1:8000/diagnosis/submit" \
  -H "Authorization: Bearer $TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "answers": [
      {"question_id": 1, "answer_value": 3},
      {"question_id": 2, "answer_value": 3},
      {"question_id": 3, "answer_value": 3},
      {"question_id": 4, "answer_value": 3},
      {"question_id": 5, "answer_value": 3}
    ],
    "monthly_investment": 100
  }'
```

**í™•ì¸**: ì‘ë‹µì—ì„œ `"ai_analysis"` í•„ë“œ í™•ì¸

---

## ì„±ëŠ¥ í…ŒìŠ¤íŠ¸

### AI ë¶„ì„ ì‘ë‹µ ì‹œê°„ ì¸¡ì •

```bash
time curl -X POST "http://127.0.0.1:8000/diagnosis/submit" \
  -H "Authorization: Bearer $TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"answers": [...], "monthly_investment": 100}'
```

**ì˜ˆìƒ ì‹œê°„**:
- AI ì—†ìŒ: 0.5-1ì´ˆ
- AI í¬í•¨: 3-8ì´ˆ (Claude API í˜¸ì¶œ ì‹œê°„)

---

## í”„ë¡œë•ì…˜ ë°°í¬ í…ŒìŠ¤íŠ¸

### Render.com ë°°í¬ í›„

1. í™˜ê²½ë³€ìˆ˜ ì„¤ì • í™•ì¸:
   ```
   Dashboard â†’ Environment â†’ ANTHROPIC_API_KEY
   ```

2. ë°°í¬ URLë¡œ í…ŒìŠ¤íŠ¸:
   ```
   https://your-app.onrender.com/docs
   ```

3. í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ë°±ì—”ë“œ URL í™•ì¸:
   ```
   frontend/.env.production
   VITE_API_URL=https://your-backend.onrender.com
   ```

---

## ì²´í¬ë¦¬ìŠ¤íŠ¸

í…ŒìŠ¤íŠ¸ ì™„ë£Œ í™•ì¸:

- [ ] API í‚¤ ë°œê¸‰ ì™„ë£Œ
- [ ] .env íŒŒì¼ ìƒì„± ë° API í‚¤ ì„¤ì •
- [ ] requirements.txtì— anthropic íŒ¨í‚¤ì§€ í™•ì¸
- [ ] ë°±ì—”ë“œ ì„œë²„ ì •ìƒ ì‹¤í–‰ (8000 í¬íŠ¸)
- [ ] í”„ë¡ íŠ¸ì—”ë“œ ì„œë²„ ì •ìƒ ì‹¤í–‰ (5173 í¬íŠ¸)
- [ ] íšŒì›ê°€ì… ì„±ê³µ
- [ ] ë¡œê·¸ì¸ ì„±ê³µ
- [ ] ì„¤ë¬¸ ì œì¶œ ì„±ê³µ
- [ ] ê¸°ë³¸ ì§„ë‹¨ ê²°ê³¼ í‘œì‹œ í™•ì¸
- [ ] ğŸ¤– AI ë¶„ì„ ì„¹ì…˜ í‘œì‹œ í™•ì¸
  - [ ] ê°œì¸í™”ëœ íˆ¬ìì„±í–¥ ë¶„ì„
  - [ ] íˆ¬ì ì¡°ì–¸
  - [ ] ìœ„í—˜ ì£¼ì˜ì‚¬í•­
- [ ] AI ë¶„ì„ ë‚´ìš©ì´ ì„¤ë¬¸ ë‹µë³€ê³¼ ê´€ë ¨ ìˆëŠ”ì§€ í™•ì¸
- [ ] ë‹¤ì–‘í•œ íˆ¬ìì„±í–¥ ì‹œë‚˜ë¦¬ì˜¤ í…ŒìŠ¤íŠ¸ (ë³´ìˆ˜/ì¤‘ë„/ì ê·¹)

---

## ë‹¤ìŒ ë‹¨ê³„

í…ŒìŠ¤íŠ¸ ì™„ë£Œ í›„:

1. âœ… ë¡œì»¬ í™˜ê²½ì—ì„œ ì •ìƒ ì‘ë™ í™•ì¸
2. ğŸš€ í”„ë¡œë•ì…˜ ë°°í¬ (Render.com, Vercel)
3. ğŸ“Š ì‚¬ìš©ì í”¼ë“œë°± ìˆ˜ì§‘
4. ğŸ”§ ì„±ëŠ¥ ìµœì í™” (ìºì‹±, ë°°ì¹˜ ì²˜ë¦¬)
5. ğŸ’° ë¹„ìš© ëª¨ë‹ˆí„°ë§ (Anthropic API ì‚¬ìš©ëŸ‰)

---

**ë¬¸ì œê°€ ìˆìœ¼ë©´ GitHub Issuesì— ë³´ê³ í•´ì£¼ì„¸ìš”!**

# Phase 9 작업 백로그

작성일: 2026-01-22

## Phase 9 — Pre-Release Finalization

### 목표
1. 운영 안정성(E2E 기준) 검증 완료
2. 법적 오해 가능성 제거(비자문·비추천 명확화)
3. 사용자 결과 표출의 일관성·가독성 확보
4. 릴리스 및 롤백 가능 상태 확정

---

## Epic 1: E2E 테스트 검증

### Story 1.1: 핵심 시나리오 E2E 테스트 작성
| Task | 설명 | 우선순위 | 상태 |
|------|------|---------|------|
| 1.1.1 | 신규 사용자 → 포트폴리오 입력 → 평가 → 결과 확인 시나리오 | P0 | ✅ 완료 |
| 1.1.2 | 동일 사용자 본인 포트폴리오 간 비교 시나리오 | P0 | ✅ 완료 |
| 1.1.3 | 입력 오류/누락/극단값 처리 시나리오 | P1 | ✅ 완료 |
| 1.1.4 | 대량 요청/반복 요청(레이트 리밋) 시나리오 | P1 | ✅ 완료 |

### Story 1.2: 검증 포인트 테스트
| Task | 설명 | 우선순위 | 상태 |
|------|------|---------|------|
| 1.2.1 | 결과 재현성 테스트 (동일 입력 → 동일 결과) | P0 | ✅ 완료 |
| 1.2.2 | 타임아웃/재시도 정책 정상 동작 테스트 | P1 | ✅ 완료 |
| 1.2.3 | 로그·감사 이벤트 누락 여부 검증 | P1 | ✅ 완료 |

### Story 1.3: E2E 테스트 보고서 작성
| Task | 설명 | 우선순위 | 상태 |
|------|------|---------|------|
| 1.3.1 | 테스트 결과 취합 및 `phase9_e2e_test_report.md` 작성 | P0 | ✅ 완료 |

### 테스트 코드 위치
| 파일 | 시나리오 |
|------|----------|
| `backend/tests/e2e/test_phase9_evaluation_flow.py` | TC-1.x 평가 플로우 |
| `backend/tests/e2e/test_phase9_comparison.py` | TC-2.x 비교 기능 |
| `backend/tests/e2e/test_phase9_error_handling.py` | TC-3.x 오류 처리 |
| `backend/tests/e2e/test_phase9_reproducibility.py` | TC-5.x 재현성 |
| `backend/tests/e2e/test_phase9_rate_limit.py` | TC-4.x 레이트 리밋 |
| `backend/tests/e2e/test_phase9_timeout_retry.py` | TC-7.x 타임아웃/재시도 |
| `backend/tests/e2e/test_phase9_audit_log.py` | TC-6.x 감사 로그 |

---

## Epic 2: 결과 표출 문구·UI 안전성 점검

### Story 2.1: 최종 문구 세트 확정
| Task | 설명 | 우선순위 | 상태 |
|------|------|---------|------|
| 2.1.1 | 금지 표현 목록 최종 정리 (추천·권유·보장 암시) | P0 | ✅ 완료 |
| 2.1.2 | 허용 표현 목록 최종 정리 (정보 제공·비교) | P0 | ✅ 완료 |
| 2.1.3 | 결과 화면 하단 고정 문구 확정 | P0 | ✅ 완료 |
| 2.1.4 | `result_wording_final.md` 문서 작성 | P0 | ✅ 완료 |

### Story 2.2: UI 구조 점검
| Task | 설명 | 우선순위 | 상태 |
|------|------|---------|------|
| 2.2.1 | 점수/등급 표시 → 상대적 지표 명시 확인 | P0 | ✅ 완료 |
| 2.2.2 | 비교 결과 → "우열" 대신 "차이" 중심 표현 확인 | P0 | ✅ 완료 |
| 2.2.3 | 색상/아이콘 투자 판단 유도 여부 점검 | P1 | ✅ 완료 |
| 2.2.4 | 프론트엔드 코드 수정 (필요 시) | P1 | ⏸️ 보류 (Phase 7 범위 통과) |

### Story 2.3: 금지어 스캔 전체 범위 실행
| Task | 설명 | 우선순위 | 상태 |
|------|------|---------|------|
| 2.3.1 | 전체 코드베이스 금지어 스캔 실행 | P0 | ✅ 완료 |
| 2.3.2 | 스캔 결과 검토 및 수정 | P0 | ✅ 완료 (레거시 25건 검토 필요) |

---

## Epic 3: 로그·감사·재처리 최종 검증

### Story 3.1: 필수 로그 검증
| Task | 설명 | 우선순위 | 상태 |
|------|------|---------|------|
| 3.1.1 | 입력 스냅샷 해시 로깅 확인 | P1 | ✅ 완료 |
| 3.1.2 | 평가 버전 로깅 확인 | P1 | ✅ 완료 |
| 3.1.3 | 결과 요약 로깅 확인 | P1 | ✅ 완료 |
| 3.1.4 | 사용자 액션 이벤트 로깅 확인 | P1 | ✅ 완료 |

### Story 3.2: 재처리(Replay) 검증
| Task | 설명 | 우선순위 | 상태 |
|------|------|---------|------|
| 3.2.1 | 동일 입력 재처리 시 결과 불변성 테스트 | P0 | ✅ 완료 |
| 3.2.2 | 버전 변경 시 결과 분리 저장 확인 | P1 | ✅ 완료 |

---

## Epic 4: 릴리스 체크리스트

### Story 4.1: 환경 및 설정 확정
| Task | 설명 | 우선순위 | 상태 |
|------|------|---------|------|
| 4.1.1 | 환경 변수(prod) 확정 및 문서화 | P0 | ✅ 완료 |
| 4.1.2 | 추천/선정 로직 비활성화 유지 확인 | P0 | ✅ 완료 |
| 4.1.3 | 관리자 기능 접근 통제 확인 | P0 | ✅ 완료 |

### Story 4.2: 모니터링 및 장애 대응
| Task | 설명 | 우선순위 | 상태 |
|------|------|---------|------|
| 4.2.1 | 모니터링/알림 활성화 확인 | P1 | ✅ 완료 |
| 4.2.2 | 장애 대응 연락체계 명시 | P1 | ✅ 완료 |

### Story 4.3: 릴리스 체크리스트 문서 작성
| Task | 설명 | 우선순위 | 상태 |
|------|------|---------|------|
| 4.3.1 | `release_checklist.md` 작성 | P0 | ✅ 완료 |

---

## Epic 5: 롤백 플랜

### Story 5.1: 롤백 트리거 정의
| Task | 설명 | 우선순위 | 상태 |
|------|------|---------|------|
| 5.1.1 | 결과 불일치 트리거 조건 정의 | P0 | ✅ 완료 |
| 5.1.2 | 법적 표현 이슈 트리거 조건 정의 | P0 | ✅ 완료 |
| 5.1.3 | 성능 임계치 초과 트리거 조건 정의 | P1 | ✅ 완료 |

### Story 5.2: 롤백 절차 수립
| Task | 설명 | 우선순위 | 상태 |
|------|------|---------|------|
| 5.2.1 | 기능 플래그 OFF 절차 문서화 | P0 | ✅ 완료 |
| 5.2.2 | Phase 8 안정 버전 복귀 절차 문서화 | P0 | ✅ 완료 |
| 5.2.3 | 로그 보존 및 원인 분석 절차 문서화 | P1 | ✅ 완료 |

### Story 5.3: 롤백 플랜 문서 작성
| Task | 설명 | 우선순위 | 상태 |
|------|------|---------|------|
| 5.3.1 | `rollback_plan.md` 작성 | P0 | ✅ 완료 |

---

## 산출물 체크리스트

| 산출물 | Epic | 상태 |
|--------|------|------|
| `phase9_e2e_test_report.md` | Epic 1 | ✅ 완료 |
| `result_wording_final.md` | Epic 2 | ✅ 완료 |
| `forbidden_word_scan_report.md` | Epic 2 | ✅ 완료 |
| `epic3_log_audit_report.md` | Epic 3 | ✅ 완료 |
| `release_checklist.md` | Epic 4 | ✅ 완료 |
| `rollback_plan.md` | Epic 5 | ✅ 완료 |

---

## 우선순위 요약

### P0 (필수)
- E2E 핵심 시나리오 테스트 (1.1.1, 1.1.2)
- 결과 재현성 테스트 (1.2.1)
- 최종 문구 세트 확정 (2.1.x)
- UI 우열 표현 점검 (2.2.1, 2.2.2)
- 금지어 스캔 전체 실행 (2.3.x)
- 재처리 불변성 테스트 (3.2.1)
- 환경 변수 및 로직 확인 (4.1.x)
- 롤백 트리거 및 절차 정의 (5.1.x, 5.2.x)
- 산출물 문서 작성 (1.3.1, 2.1.4, 4.3.1, 5.3.1)

### P1 (권장)
- 오류/극단값 시나리오 (1.1.3, 1.1.4)
- 타임아웃/로그 검증 (1.2.2, 1.2.3)
- 색상/아이콘 점검 (2.2.3)
- 필수 로그 검증 (3.1.x)
- 모니터링/장애 대응 (4.2.x)

---

## 다음 단계

**Epic 1 완료** — E2E 테스트 62개 전체 통과 (2026-01-22)

```
tests/e2e/test_phase9_*.py: 60 passed, 2 skipped
- test_phase9_comparison.py: 7 passed
- test_phase9_error_handling.py: 18 passed
- test_phase9_evaluation_flow.py: 5 passed
- test_phase9_reproducibility.py: 10 passed
- test_phase9_rate_limit.py: 6 passed, 2 skipped
- test_phase9_timeout_retry.py: 6 passed
- test_phase9_audit_log.py: 8 passed
```

**Epic 2 완료** — 결과 표출 문구·UI 안전성 점검 (2026-01-23)

- ✅ Story 2.1: 최종 문구 세트 확정 (`result_wording_final.md`)
- ✅ Story 2.2: UI 구조 점검 (Phase 7 범위 통과)
- ✅ Story 2.3: 금지어 스캔 전체 범위 실행 (`forbidden_word_scan_report.md`)
  - Phase 7 범위: ✅ PASS (0건)
  - 레거시 코드: ⚠️ 25건 수정 권장 (P1/P2)

**Epic 3 완료** — 로그·감사·재처리 최종 검증 (2026-01-23)

- ✅ Story 3.1: 필수 로그 검증 (해시, 버전, 결과, 액션 이벤트)
- ✅ Story 3.2: 재처리 검증 (결과 불변성, 버전 분리 저장)
- 검증 보고서: `epic3_log_audit_report.md`

**Epic 4 완료** — 릴리스 체크리스트 (2026-01-23)

- ✅ Story 4.1: 환경 및 설정 확정
- ✅ Story 4.2: 모니터링 및 장애 대응
- ✅ Story 4.3: `release_checklist.md` 작성

**Epic 5 완료** — 롤백 플랜 (2026-01-23)

- ✅ Story 5.1: 롤백 트리거 정의 (Critical/High/Medium)
- ✅ Story 5.2: 롤백 절차 수립 (3단계 절차)
- ✅ Story 5.3: `rollback_plan.md` 작성

---

## Phase 9 완료

**모든 Epic 완료** (2026-01-23)

| Epic | 상태 | 산출물 |
|------|------|--------|
| Epic 1: E2E 테스트 검증 | ✅ 완료 | 테스트 62개 통과 |
| Epic 2: 결과 표출 문구·UI 안전성 | ✅ 완료 | `result_wording_final.md`, `forbidden_word_scan_report.md` |
| Epic 3: 로그·감사·재처리 검증 | ✅ 완료 | `epic3_log_audit_report.md` |
| Epic 4: 릴리스 체크리스트 | ✅ 완료 | `release_checklist.md` |
| Epic 5: 롤백 플랜 | ✅ 완료 | `rollback_plan.md` |

**잔여 작업:**
- [x] `phase9_e2e_test_report.md` 작성 (Epic 1.3.1) ✅ 2026-01-23 완료
- [ ] 릴리스 체크리스트 서명 (배포 전)

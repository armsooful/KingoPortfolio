# Phase 3-C / Epic U-1 API 범위 및 제약 명세
최초작성일자: 2026-01-18
최종수정일자: 2026-01-18

## 1. 목적

U-1 사용자 기능은 Read-only 원칙을 유지하며, 사용자 행동을 유발하지 않는 정보 제공을 목적으로 한다. 본 문서는 사용자 API의 범위와 제약 조건을 명확히 정의한다.

---

## 2. 공통 원칙

- **Read-only**: 모든 사용자 API는 GET만 허용
- **캐시 가능**: 성과/구성 조회는 캐시 정책 적용
- **네임스페이스 분리**: 관리자 API와 경로 분리
- **투자 권유 금지**: 응답 내용에 추천/시그널 포함 금지

---

## 3. 결과/성과 노출 기준

- **결과 버전**: `active result_version`만 노출
- **성과 타입**: `LIVE` 성과만 노출 (SIM/BACK 비노출)
- **기준일**: `as_of_date` 필수 포함
- **출처 정보**: 데이터 출처 요약 필수 제공

---

## 4. 사용자 API 범위

### 4.1 포트폴리오 현황 조회
- 자산 구성(자산군/종목/비중)
- 기준일(as_of)
- 데이터 출처 요약

### 4.2 성과 조회
- 기간 수익률(1M/3M/6M/YTD)
- 누적 수익률
- 벤치마크 대비 수익률

### 4.3 성과 해석 정보
- 수익률 산식 요약
- 반영 요소(수수료/환율/배당 여부)
- 기준 가격(종가 기준)

### 4.4 신뢰 설명 패널(Why Panel)
- 계산 기준/스냅샷 요약
- 성과 산출 시점 안내
- 내부 식별자(execution_id/snapshot_id) 비노출

---

## 5. 오류/지연 처리 원칙

- 데이터 미산출: 사용자 친화적 안내 문구
- 기준일 불일치: 경고 배지 표시
- 시스템 오류: 기술 용어 최소화, 대체 안내 제공

---

## 6. 응답 필수 필드

- `as_of_date`
- `data_source`
- `result_version_id` (내부 식별자, 사용자 화면에는 표시하지 않을 수 있음)
- `is_reference` (참고용 여부 표시)

---

## 7. 금지 항목

- 추천/교체/매수 유도 문구
- 사용자 입력에 따른 결과 변경 로직
- 관리자 API 기능 노출

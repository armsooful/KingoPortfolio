# Phase 3-C / 사용자 기능(U-3) 상세 설계
최초작성일자: 2026-01-18
최종수정일자: 2026-01-18

## 1. 개요
U-3는 U-1/U-2의 읽기 전용 경험을 확장해 반복 사용 시 학습/탐색 효율을 높이고, 개인화된 맥락 제공 및 성과 계측 가능한 폐루프를 구성한다. 모든 기능은 비추천/비선정 원칙을 준수하며 규제 가드가 우선한다.

## 2. 목표
- 고급 사용자 흐름 완성: 반복 사용 시 탐색 효율 개선
- 개인화(비추천/비선정): 사용자 설정/맥락 반영하되 가드 준수
- 성과 계측 가능화: 행동 -> 지표 -> 피드백 폐루프 형성

## 3. 범위

### In-Scope
- 사용자 설정 고도화(프리셋, 알림/노출 빈도 제어)
- 상태 인식 UX(진행/보류/차단 사유 명시)
- 이력/비교 도구(활동 히스토리, 변화 요약)
- 가드 강화(추천/선정 호출 차단 재검증, 금지 키워드 회귀)

### Out-of-Scope
- 추천/선정/예측 기반 안내
- 사용자 입력에 따른 결과 조정
- SIM/BACK 성과 노출

## 4. 사용자 시나리오
- 사용자는 보기/정렬/필터 프리셋을 저장해 재방문 시 빠르게 탐색한다.
- 사용자는 상태 사유(보류/차단)를 확인하고 재시도 또는 대안 경로를 선택한다.
- 사용자는 자신의 활동 히스토리를 확인하고 이전 상태 대비 변화 요약을 본다.

## 5. 기능 설계

### 5.1 사용자 설정 고도화
- 프리셋 유형: 보기/정렬/필터
- 알림/노출 빈도: 사용자 옵트인 기반, 기본은 비활성
- 정책: 사용자별 저장, 기본값 제공, 삭제 시 기본값 복구

### 5.2 상태 인식 UX
- 상태값: `IN_PROGRESS`, `DEFERRED`, `BLOCKED`, `COMPLETED`
- 사유 코드: `DATA_DELAY`, `GUARD_BLOCK`, `RATE_LIMIT`, `SYSTEM_ERROR`
- 대안 경로: 재시도/대기 안내 및 관련 도움말 링크

### 5.3 이력/비교 도구
- 활동 히스토리: 화면 진입/조회/북마크 등 핵심 이벤트 기록
- 변화 요약: 이전 상태 대비 핵심 변화 서술(수치 비노출 가능)
 - 이벤트 수집 경로: 클라이언트가 `/api/v1/users/me/activity-events`로 기록(서버는 읽기/검증만 수행)

### 5.4 가드 강화
- 추천/선정 호출 경로 전면 차단 재검증
- 금지 키워드/문구 회귀 테스트 자동화

## 6. 데이터 및 스키마 초안
- 사용자 설정: `user_id`, `preset_type`, `preset_payload`, `created_at`, `updated_at`
- 상태/이력: `user_id`, `event_type`, `status`, `reason_code`, `metadata`, `timestamp`
- 감사 로그 연계: 상태 변경, 차단 발생 시 로그 기록

## 7. 규제/가드 준수
- 비추천/비선정 원칙 준수
- 금지 키워드 필터를 UI/응답 전반에 적용
- 가드 위반 시 사용자 메시지는 설명형으로 제한

## 8. 오류/지연 처리
- 지연 시 상태 명시 및 재시도 옵션 제공
- 오류는 사용자 친화 메시지로 표준화
- 대안 경로 제공(대기/도움말)

## 9. 접근성 최소 기준
- 키보드 탐색 가능
- 명도 대비 기준 준수(기본 4.5:1)
- 상태 메시지 스크린리더 대응

## 10. 감사 로그/보존
- 사용자 설정 변경 및 가드 차단 이벤트 기록
- 보존 정책은 운영 안정화 정책에 따름

## 11. 검증 기준
- E2E 7케이스 통과
- 가드 차단 100% 확인(모의 호출 포함)
- 오류율/지연 SLA 충족
- 로그/감사 추적 가능

## 12. 연계 문서
- `docs/phase3/20260118_u3_implementation_tickets.md`
- `docs/phase3/20260118_u1_u2_ops_stabilization_plan.md`

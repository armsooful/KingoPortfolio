# 수정종가 적재 개선사항

## 목적
현재 국내(KRX) 데이터 로더는 수정종가를 별도 소스에서 받지 못해 `종가 = 수정종가`로 적재합니다. 본 문서는 향후 정확한 수정종가를 반영하기 위한 개선 항목을 정리합니다.

## 현 상태
- KRX 기반 적재는 OHLCV만 제공됨.
- `adj_close_price`는 `close_price`로 채움.
- 백테스팅은 KRX는 `close`를 사용.

## 개선 필요 사항
1) **수정종가 소스 확보**
- 유료 데이터 공급사 또는 공시/거래소 데이터 구매.
- 액면분할/배당 반영이 가능한 소스 우선.

2) **보정 로직 도입**
- 액면분할(분할비율) 및 배당 지급 정보를 수집.
- 과거 가격을 보정하여 adjusted close 산출.

3) **데이터 스키마 및 품질 플래그 강화**
- `quality_flag`에 `ADJUSTED` 적용 기준 정의.
- 보정 전/후 데이터 추적을 위한 메타데이터 기록.

4) **백필(Backfill) 전략**
- 기존 데이터에 대한 일괄 보정 작업 계획.
- 배치 작업 실패/재실행 정책 포함.

5) **사용 위치 통일**
- 백테스팅/성과분석에서 adjusted close 우선 사용 규칙 정의.
- KRX/US 데이터 소스별 우선순위 문서화.

6) **검증/테스트**
- 특정 종목의 공시 이벤트(분할, 배당) 기준 샘플 검증.
- 보정 전/후 수익률 차이 확인 테스트 추가.

## 참고
- 현재는 `close_price`를 `adj_close_price`로 저장하는 임시 조치입니다.
- 수정종가가 확보되면 로더와 백테스팅 우선순위를 수정해야 합니다.

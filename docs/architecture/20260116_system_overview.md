# ForestoCompass 시스템 아키텍처 개요
최초작성일자: 2026-01-16
최종수정일자: 2026-01-18

**문서 버전**: 1.0
**작성일**: 2026-01-16
**대상**: 운영팀, 감사팀, 외부 파트너, 투자자

---

## 1. 서비스 개요

### 1.1 ForestoCompass란?

ForestoCompass는 **교육 및 정보 제공 목적**의 포트폴리오 시뮬레이션 플랫폼입니다.

사용자가 과거 시장 데이터를 기반으로 다양한 투자 시나리오를 **시뮬레이션**하고,
그 결과를 **정량적 지표**로 확인할 수 있습니다.

### 1.2 핵심 원칙

```
┌─────────────────────────────────────────────────────────────┐
│                    ForestoCompass 원칙                       │
├─────────────────────────────────────────────────────────────┤
│  ✓ 교육 목적의 시뮬레이션 도구                               │
│  ✓ 과거 데이터 기반 분석만 제공                              │
│  ✓ 투자 추천/자문을 수행하지 않음                            │
│  ✓ 미래 수익을 보장하거나 예측하지 않음                       │
└─────────────────────────────────────────────────────────────┘
```

---

## 2. 시스템 구성

### 2.1 기술 스택

| 계층 | 기술 | 용도 |
|------|------|------|
| Frontend | React + TypeScript | 사용자 인터페이스 |
| Backend | FastAPI (Python) | API 서버 |
| Database | PostgreSQL | 데이터 저장 |
| Cache | Redis (선택) | 세션/캐시 |
| Infra | Vercel + Railway | 클라우드 배포 |

### 2.2 아키텍처 다이어그램

```
┌──────────────┐     HTTPS      ┌──────────────┐     SQL      ┌──────────────┐
│   Frontend   │ ◄────────────► │   Backend    │ ◄──────────► │  PostgreSQL  │
│   (React)    │                │  (FastAPI)   │              │   Database   │
└──────────────┘                └──────────────┘              └──────────────┘
       │                               │
       │                               │
       ▼                               ▼
┌──────────────┐                ┌──────────────┐
│  차트 렌더링  │                │  시뮬레이션   │
│  (Recharts)  │                │    엔진      │
└──────────────┘                └──────────────┘
```

---

## 3. 데이터 흐름

### 3.1 시뮬레이션 요청 흐름

```
사용자 입력                시뮬레이션                 결과 표시
    │                         │                         │
    ▼                         ▼                         ▼
┌─────────┐              ┌─────────┐              ┌─────────┐
│시나리오  │   ────►     │과거 데이터│   ────►     │KPI 지표 │
│선택     │              │기반 계산 │              │시각화   │
└─────────┘              └─────────┘              └─────────┘
    │                         │                         │
    │                         │                         │
 시작일/종료일           NAV 경로 계산           CAGR, MDD 등
 초기 투자금액           리밸런싱 시뮬레이션      차트 렌더링
```

### 3.2 데이터 소스

| 데이터 | 소스 | 갱신 주기 |
|--------|------|-----------|
| 일간 수익률 | 내부 DB (시드 데이터) | 초기 로드 |
| 포트폴리오 구성 | 시나리오 테이블 | 고정 |
| ETF 정보 | 자산 마스터 테이블 | 고정 |

---

## 4. 주요 기능

### 4.1 Phase 1: 기본 시뮬레이션

| 기능 | 설명 |
|------|------|
| 시나리오 시뮬레이션 | MIN_VOL, DEFENSIVE, GROWTH 시나리오 |
| NAV 경로 계산 | 일간 수익률 기반 자산가치 추적 |
| 위험 지표 | 변동성, 최대 낙폭(MDD), 회복 기간 |

### 4.2 Phase 2: 고급 기능

| 기능 | 설명 |
|------|------|
| 리밸런싱 시뮬레이션 | 월간/분기 정기, 편차 기반 |
| 성과 분석 (KPI) | CAGR, Volatility, Sharpe Ratio |
| 비교 분석 | 두 시뮬레이션 결과 비교 |

---

## 5. 보안 및 접근 제어

### 5.1 인증/인가

| 항목 | 방식 |
|------|------|
| 인증 | JWT (JSON Web Token) |
| 세션 | 30분 만료 (기본) |
| API 제한 | Rate Limiting (시간당 5회 분석) |

### 5.2 데이터 보호

- 사용자 비밀번호: bcrypt 해싱
- 민감 정보: 환경변수로 관리
- HTTPS: 전 구간 암호화

---

## 6. 운영 현황

### 6.1 Feature Flag 상태

| Flag | 기본값 | 설명 |
|------|--------|------|
| USE_REBALANCING | OFF | 리밸런싱 기능 |
| USE_SIM_STORE | OFF | PostgreSQL 시뮬레이션 저장 |
| USE_SCENARIO_DB | OFF | DB 기반 시나리오 |

### 6.2 버전 정보

| 항목 | 버전 |
|------|------|
| 앱 버전 | 1.0.0 |
| 엔진 버전 | 1.0.0 |
| Phase | Phase 2 Complete |
| 릴리스 태그 | release/phase2-complete |

---

## 7. 면책 사항

```
┌─────────────────────────────────────────────────────────────┐
│                        면책 사항                             │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  본 서비스는 교육 및 정보 제공 목적으로만 제공됩니다.          │
│                                                             │
│  • 과거 데이터 기반 시뮬레이션이며, 미래 수익을 보장하지       │
│    않습니다.                                                 │
│                                                             │
│  • 투자 추천, 투자 자문, 투자 조언을 제공하지 않습니다.        │
│                                                             │
│  • 실제 투자 결정은 사용자 본인의 책임 하에 이루어져야         │
│    합니다.                                                   │
│                                                             │
│  • 본 서비스 사용으로 인한 투자 손실에 대해 책임지지           │
│    않습니다.                                                 │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

---

*본 문서는 ForestoCompass 시스템의 공식 아키텍처 개요입니다.*

# Phase 3-D / 성과·피드백 루프 상세 설계
최초작성일자: 2026-01-19
최종수정일자: 2026-01-19

## 1. 목적
- 사용자 행동 → 결과 → 인지 가능한 피드백 연결
- 내부 성과 지표 가시화
- 다음 개선 사이클로 이어지는 폐루프(Closed Loop) 형성

※ 투자 판단, 성과 예측, 우수/열위 비교는 포함하지 않음

## 2. 범위

### 포함 범위
- 사용자 행동 이벤트 수집
- 상태 변화 기반 결과 지표 계산
- 사실 서술형 피드백
- 운영/개선용 내부 메트릭

### 제외 범위
- 개별 종목/포트폴리오 성과 비교
- 추천·선정·점수화
- 미래 성과 암시 문구

## 3. 아키텍처 개요

[User Action] -> [Event Log] -> [Metric Aggregator] -> [Feedback Renderer] -> [User / Operator View]

- Event Log: 사실 기록(누가, 언제, 무엇을)
- Metric Aggregator: 집계/변화량 계산
- Feedback Renderer: 안전 문구 변환

## 4. 핵심 기능 블록

### D-1. 사용자 행동 이벤트
- 조회, 입력, 재시도, 완료, 중단
- 시간/빈도/경로만 기록 (금액·성과 X)

### D-2. 상태 변화 지표
- 완료율
- 재시도율
- 평균 소요 시간
- 이탈 지점

### D-3. 피드백 표현 원칙
- 비교 ❌ → 변화 서술 ⭕
- 평가 ❌ → 관찰 ⭕
- 예측 ❌ → 과거 사실 ⭕

예시: "최근 7일 동안 이 단계에서 평균 2회 재시도가 발생했습니다."

## 5. 데이터 흐름
- 이벤트 수집: API/클라이언트 로그 → Event Log 저장
- 집계: 배치 또는 스트림 방식(추후 확정)
- 피드백: 안전 문구 템플릿 + 금지 문구 가드 적용

## 6. 가드/규제 준수
- 추천·선정 경로 0
- 금지 문구 회귀 테스트 유지
- 피드백은 사실 서술형만 허용

## 7. 완료 판정 기준
- 이벤트 로그 누락 없음
- 지표 재현 가능(동일 입력 → 동일 결과)
- 피드백 문구 규제 위반 0건
- 추천·선정 경로 0

## 8. 연계 문서
- `docs/phase3/20260118_phase3d_design_kickoff.md`
- `docs/reports/foresto_compass_u3_verification_report.md`
